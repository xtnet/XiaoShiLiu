const NotificationHelper = require('../utils/notificationHelper');
const config = require('../config/config');
const { pool } = config;
const fs = require('fs');
const path = require('path');


// æ¨¡æ‹Ÿæ•°æ®ç”Ÿæˆå™¨
class DataGenerator {
  constructor() {
    // è¯»å–å›¾ç‰‡é“¾æ¥æ–‡ä»¶
    this.avatarLinks = this.loadLinksFromFile('../imgLinks/avatar_link.txt');
    this.imageLinks = this.loadLinksFromFile('../imgLinks/post_img_link.txt');
    // ä½¿ç”¨ä¸­æ–‡åˆ†ç±»åç§°
    this.categories = [
      'å­¦ä¹ ', 'æ ¡å›­', 'æƒ…æ„Ÿ', 'å…´è¶£',
      'ç”Ÿæ´»', 'ç¤¾äº¤', 'æ±‚åŠ©', 'è§‚ç‚¹', 'æ¯•ä¸š', 'èŒåœº'
    ];
    // åˆ†ç±»å¯¹åº”çš„ç›¸å…³å†…å®¹
    this.categoryData = {
      'å­¦ä¹ ': {
        name: 'å­¦ä¹ ',
        tags: ['å­¦ä¹ ', 'çŸ¥è¯†', 'æŠ€èƒ½', 'æˆé•¿', 'æ•™ç¨‹', 'ç¬”è®°', 'è€ƒè¯•', 'è¯»ä¹¦'],
        titles: [
          'é«˜æ•ˆå­¦ä¹ æ³•åˆ†äº«ï¼Œè®©ä½ äº‹åŠåŠŸå€',
          'æˆ‘çš„å­¦ä¹ ç¬”è®°æ•´ç†æœ¯ï¼Œè¶…å®ç”¨ï¼',
          'ä»å­¦æ¸£åˆ°å­¦éœ¸çš„é€†è¢­ä¹‹è·¯',
          'è¿™äº›å­¦ä¹ APPæ”¹å˜äº†æˆ‘çš„äººç”Ÿ',
          'æœŸæœ«å¤ä¹ æ”»ç•¥ï¼ŒåŠ©ä½ è½»æ¾è¿‡å…³',
          'è¯»ä¹¦ç¬”è®°åˆ†äº«ï¼šã€Šxxxã€‹è¯»åæ„Ÿ',
          'è‹±è¯­å­¦ä¹ å¿ƒå¾—ï¼Œé›¶åŸºç¡€ä¹Ÿèƒ½å­¦å¥½',
          'è€ƒç ”ç»éªŒåˆ†äº«ï¼Œä¸€æˆ˜ä¸Šå²¸ç§˜ç±',
          'æ—¶é—´ç®¡ç†æŠ€å·§ï¼Œå‘Šåˆ«æ‹–å»¶ç—‡',
          'è®°å¿†åŠ›è®­ç»ƒæ–¹æ³•ï¼Œè¿‡ç›®ä¸å¿˜ä¸æ˜¯æ¢¦'
        ],
        contents: [
          'ç»è¿‡ä¸€å¹´çš„æ‘¸ç´¢ï¼Œæˆ‘ç»ˆäºæ‰¾åˆ°äº†é€‚åˆè‡ªå·±çš„å­¦ä¹ æ–¹æ³•ã€‚ä»Šå¤©åˆ†äº«ç»™å¤§å®¶ï¼Œå¸Œæœ›èƒ½å¸®åŠ©åˆ°æ­£åœ¨å­¦ä¹ è·¯ä¸Šå¥‹æ–—çš„å°ä¼™ä¼´ä»¬ã€‚è®°ä½ï¼Œæ–¹æ³•æ¯”åŠªåŠ›æ›´é‡è¦ï¼',
          'æ•´ç†äº†æˆ‘è¿™å­¦æœŸçš„å­¦ä¹ ç¬”è®°å’Œå¿ƒå¾—ä½“ä¼šï¼Œä»æ—¶é—´è§„åˆ’åˆ°çŸ¥è¯†æ¢³ç†ï¼Œæ¯ä¸€ä¸ªç¯èŠ‚éƒ½æœ‰è¯¦ç»†çš„æ–¹æ³•ä»‹ç»ã€‚å­¦ä¹ ä¸æ˜¯æ­»è®°ç¡¬èƒŒï¼Œè€Œæ˜¯è¦æ‰¾åˆ°è§„å¾‹å’ŒæŠ€å·§ã€‚',
          'åˆ†äº«ä¸€äº›æˆ‘åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­å‘ç°çš„å®è—èµ„æºå’Œå®ç”¨å·¥å…·ï¼Œè¿™äº›éƒ½æ˜¯æˆ‘äº²æµ‹æœ‰æ•ˆçš„ã€‚å¸Œæœ›èƒ½å¸®åŠ©å¤§å®¶æé«˜å­¦ä¹ æ•ˆç‡ï¼Œæ—©æ—¥è¾¾æˆç›®æ ‡ï¼',
          'å­¦ä¹ æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼Œéœ€è¦ä¸æ–­åœ°è°ƒæ•´æ–¹æ³•å’Œå¿ƒæ€ã€‚ä»Šå¤©æƒ³å’Œå¤§å®¶èŠèŠæˆ‘åœ¨å­¦ä¹ è·¯ä¸Šçš„ä¸€äº›æ„Ÿæ‚Ÿå’Œç»éªŒï¼Œå¸Œæœ›èƒ½ç»™è¿·èŒ«ä¸­çš„ä½ ä¸€äº›å¯å‘ã€‚'
        ]
      },
      'æ ¡å›­': {
        name: 'æ ¡å›­',
        tags: ['æ ¡å›­', 'å¤§å­¦', 'ç¤¾å›¢', 'æ´»åŠ¨', 'é’æ˜¥', 'å®¿èˆ', 'é£Ÿå ‚', 'å›¾ä¹¦é¦†'],
        titles: [
          'å¤§å­¦å››å¹´ï¼Œè¿™äº›äº‹æƒ…ä¸€å®šè¦åš',
          'ç¤¾å›¢ç”Ÿæ´»è®°å½•ï¼Œé‡è§æ›´å¥½çš„è‡ªå·±',
          'æ ¡å›­ç¾é£Ÿæ¢åº—ï¼Œé£Ÿå ‚éšè—èœå•å¤§å…¬å¼€',
          'å®¿èˆæ”¹é€ å¤§ä½œæˆ˜ï¼Œå°ç©ºé—´å¤§æ™ºæ…§',
          'å›¾ä¹¦é¦†å­¦ä¹ vlogï¼Œé™è°§æ—¶å…‰æœ€ç¾å¥½',
          'æ ¡å›­æ˜¥æ—¥æ¼«æ­¥ï¼Œæ¨±èŠ±é£èˆçš„å­£èŠ‚',
          'æ¯•ä¸šå­£å€’è®¡æ—¶ï¼Œé’æ˜¥ä¸æ•£åœº',
          'æ–°ç”Ÿå…¥å­¦æŒ‡å—ï¼Œå­¦é•¿å­¦å§çš„è´´å¿ƒæé†’',
          'æœŸæœ«è€ƒè¯•å‘¨æ—¥å¸¸ï¼Œç†¬å¤œå¤ä¹ çš„æ—¥å­',
          'æ ¡å›­æ‹çˆ±å°æ•…äº‹ï¼Œé’æ¶©è€Œç¾å¥½'
        ],
        contents: [
          'å¤§å­¦æ—¶å…‰æ€»æ˜¯è¿‡å¾—ç‰¹åˆ«å¿«ï¼Œè½¬çœ¼é—´å°±è¦æ¯•ä¸šäº†ã€‚å›æƒ³è¿™å››å¹´çš„æ ¡å›­ç”Ÿæ´»ï¼Œæœ‰å¤ªå¤šç¾å¥½çš„å›å¿†å€¼å¾—çè—ã€‚ä»Šå¤©æƒ³å’Œå¤§å®¶åˆ†äº«ä¸€äº›æ ¡å›­ç”Ÿæ´»çš„ç‚¹ç‚¹æ»´æ»´ã€‚',
          'å‚åŠ ç¤¾å›¢æ˜¯å¤§å­¦ç”Ÿæ´»ä¸­æœ€ç²¾å½©çš„éƒ¨åˆ†ä¹‹ä¸€ï¼Œåœ¨è¿™é‡Œæˆ‘é‡åˆ°äº†å¿—åŒé“åˆçš„æœ‹å‹ï¼Œå­¦åˆ°äº†å¾ˆå¤šè¯¾å ‚ä¸Šå­¦ä¸åˆ°çš„ä¸œè¥¿ã€‚åˆ†äº«ä¸€äº›ç¤¾å›¢æ´»åŠ¨çš„ç²¾å½©ç¬é—´ã€‚',
          'æ ¡å›­é‡Œçš„æ¯ä¸€ä¸ªè§’è½éƒ½æœ‰ç€ç‹¬ç‰¹çš„é­…åŠ›ï¼Œä»æ¢§æ¡å¶é£˜è½çš„å°å¾„åˆ°ç¯ç«é€šæ˜çš„å›¾ä¹¦é¦†ï¼Œæ¯ä¸€å¤„é£æ™¯éƒ½æ‰¿è½½ç€é’æ˜¥çš„è®°å¿†ã€‚',
          'å®¿èˆæ˜¯æˆ‘ä»¬åœ¨æ ¡å›­é‡Œçš„å°å®¶ï¼Œè™½ç„¶ç©ºé—´ä¸å¤§ï¼Œä½†å……æ»¡äº†æ¸©é¦¨å’Œæ¬¢å£°ç¬‘è¯­ã€‚å’Œå®¤å‹ä»¬ä¸€èµ·åº¦è¿‡çš„æ—¶å…‰ï¼Œæ˜¯å¤§å­¦ç”Ÿæ´»ä¸­æœ€çè´µçš„å›å¿†ã€‚'
        ]
      },
      'æƒ…æ„Ÿ': {
        name: 'æƒ…æ„Ÿ',
        tags: ['æƒ…æ„Ÿ', 'å¿ƒæƒ…', 'æ„Ÿæ‚Ÿ', 'æ²»æ„ˆ', 'æ¸©æš–', 'å­¤ç‹¬', 'æˆé•¿', 'çˆ±æƒ…'],
        titles: [
          'æ·±å¤œemoæ—¶åˆ»ï¼Œå†™ç»™è¿·èŒ«çš„è‡ªå·±',
          'é‚£äº›æ²»æ„ˆäººå¿ƒçš„æ¸©æš–ç¬é—´',
          'å…³äºæˆé•¿ï¼Œæˆ‘æƒ³è¯´çš„è¯',
          'å­¤ç‹¬æ˜¯äººç”Ÿçš„å¿…ä¿®è¯¾',
          'çˆ±æƒ…é‡Œçš„å°ç¡®å¹¸ä¸å°å¤±è½',
          'è‡´æ•¬é‚£ä¸ªåŠªåŠ›ç”Ÿæ´»çš„è‡ªå·±',
          'äººé—´å€¼å¾—ï¼Œä½ ä¹Ÿå€¼å¾—è¢«çˆ±',
          'æˆå¹´äººçš„å´©æºƒéƒ½æ˜¯é™æ‚„æ‚„çš„',
          'æ„¿ä½ çœ¼ä¸­æœ‰å…‰ï¼Œå¿ƒä¸­æœ‰çˆ±',
          'é‚£äº›è¯´ä¸å‡ºå£çš„å¿ƒé‡Œè¯'
        ],
        contents: [
          'æœ€è¿‘æ€»æ˜¯åœ¨æ·±å¤œæ—¶åˆ†é™·å…¥æ²‰æ€ï¼Œæƒ³èµ·äº†å¾ˆå¤šè¿‡å¾€çš„äº‹æƒ…ã€‚äººç”Ÿå°±åƒä¸€åœºæ—…è¡Œï¼Œæœ‰é«˜å³°ä¹Ÿæœ‰ä½è°·ï¼Œé‡è¦çš„æ˜¯è¦å­¦ä¼šåœ¨æ¯ä¸€ä¸ªé˜¶æ®µéƒ½æ‰¾åˆ°å±äºè‡ªå·±çš„æ„ä¹‰ã€‚',
          'ç”Ÿæ´»ä¸­æ€»æœ‰ä¸€äº›ç¬é—´èƒ½å¤Ÿæ¸©æš–äººå¿ƒï¼Œå¯èƒ½æ˜¯é™Œç”Ÿäººçš„ä¸€ä¸ªå¾®ç¬‘ï¼Œå¯èƒ½æ˜¯æœ‹å‹çš„ä¸€å¥å…³æ€€ï¼Œä¹Ÿå¯èƒ½æ˜¯å®¶äººçš„ä¸€ä¸ªæ‹¥æŠ±ã€‚è¿™äº›å°å°çš„æ¸©æš–ï¼Œæ„æˆäº†ç”Ÿæ´»çš„ç¾å¥½ã€‚',
          'æˆé•¿æ˜¯ä¸€ä¸ªç—›è‹¦è€Œç¾å¥½çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬åœ¨è·Œè·Œæ’æ’ä¸­å­¦ä¼šäº†åšå¼ºï¼Œåœ¨å¤±å»ä¸­æ‡‚å¾—äº†çæƒœã€‚æ¯ä¸€æ¬¡çš„ç»å†éƒ½æ˜¯æˆé•¿è·¯ä¸Šçš„å«è„šçŸ³ã€‚',
          'æœ‰æ—¶å€™è§‰å¾—å¾ˆå­¤ç‹¬ï¼Œä½†åæ¥å‘ç°å­¤ç‹¬ä¹Ÿæ˜¯ä¸€ç§åŠ›é‡ã€‚åœ¨ç‹¬å¤„çš„æ—¶å…‰é‡Œï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ›´å¥½åœ°è®¤è¯†è‡ªå·±ï¼Œå€¾å¬å†…å¿ƒçš„å£°éŸ³ã€‚'
        ]
      },
      'å…´è¶£': {
        name: 'å…´è¶£',
        tags: ['å…´è¶£', 'çˆ±å¥½', 'æ”¶è—', 'æ‰‹å·¥', 'åˆ›ä½œ', 'ç»˜ç”»', 'éŸ³ä¹', 'æ‘„å½±'],
        titles: [
          'æ‰‹å·¥DIYæ•™ç¨‹ï¼Œé›¶åŸºç¡€ä¹Ÿèƒ½å­¦ä¼š',
          'æˆ‘çš„æ”¶è—å“åˆ†äº«ï¼Œæ¯ä¸€ä»¶éƒ½æœ‰æ•…äº‹',
          'ç»˜ç”»æ—¥å¸¸è®°å½•ï¼Œç”¨ç”»ç¬”è®°å½•ç”Ÿæ´»',
          'æ‘„å½±æŠ€å·§åˆ†äº«ï¼Œæ‹å‡ºå¤§ç‰‡çš„ç§˜å¯†',
          'éŸ³ä¹æ¨èæ¸…å•ï¼Œæ²»æ„ˆä½ çš„è€³æœµ',
          'æ‰‹è´¦åˆ¶ä½œæ•™ç¨‹ï¼Œè®°å½•ç¾å¥½æ—¶å…‰',
          'æ’èŠ±è‰ºæœ¯å…¥é—¨ï¼Œè®©ç”Ÿæ´»æ›´æœ‰ä»ªå¼æ„Ÿ',
          'ä¹¦æ³•ç»ƒä¹ æ—¥è®°ï¼Œä¸€ç¬”ä¸€åˆ’çš†ä¿®è¡Œ',
          'çƒ˜ç„™å°è¯¾å ‚ï¼Œç”œèœœç”Ÿæ´»ä»è¿™é‡Œå¼€å§‹',
          'å›­è‰ºæ—¥è®°ï¼Œå’Œæ¤ç‰©ä¸€èµ·æˆé•¿'
        ],
        contents: [
          'æœ€è¿‘è¿·ä¸Šäº†æ‰‹å·¥åˆ¶ä½œï¼Œå‘ç°åŠ¨æ‰‹åˆ›é€ çš„è¿‡ç¨‹ç‰¹åˆ«æ²»æ„ˆã€‚ä»Šå¤©åˆ†äº«ä¸€ä¸ªç®€å•æ˜“å­¦çš„DIYæ•™ç¨‹ï¼Œææ–™éƒ½å¾ˆå®¹æ˜“ä¹°åˆ°ï¼Œå¤§å®¶å¯ä»¥åœ¨å®¶è¯•è¯•çœ‹ã€‚',
          'æ¯ä¸€ä»¶æ”¶è—å“èƒŒåéƒ½æœ‰ä¸€ä¸ªæ•…äº‹ï¼Œæœ‰äº›æ˜¯æ—…è¡Œæ—¶çš„çºªå¿µï¼Œæœ‰äº›æ˜¯æœ‹å‹çš„ç¤¼ç‰©ï¼Œæœ‰äº›æ˜¯å¶ç„¶å‘ç°çš„å®è´ã€‚ä»Šå¤©æƒ³å’Œå¤§å®¶åˆ†äº«æˆ‘çš„æ”¶è—æ•…äº‹ã€‚',
          'ç”¨ç”»ç¬”è®°å½•ç”Ÿæ´»ä¸­çš„ç¾å¥½ç¬é—´ï¼Œæ˜¯æˆ‘æœ€å–œæ¬¢çš„äº‹æƒ…ä¹‹ä¸€ã€‚ä¸éœ€è¦å¤šä¹ˆé«˜è¶…çš„æŠ€å·§ï¼Œåªè¦ç”¨å¿ƒå»è§‚å¯Ÿå’Œæ„Ÿå—ï¼Œæ¯ä¸€å¹…ç”»éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ã€‚',
          'æ‘„å½±è®©æˆ‘å­¦ä¼šäº†ç”¨ä¸åŒçš„è§’åº¦å»çœ‹ä¸–ç•Œï¼Œæ¯ä¸€æ¬¡æŒ‰ä¸‹å¿«é—¨éƒ½æ˜¯å¯¹ç¾å¥½ç¬é—´çš„å®šæ ¼ã€‚åˆ†äº«ä¸€äº›æˆ‘åœ¨æ‘„å½±è·¯ä¸Šçš„å¿ƒå¾—å’ŒæŠ€å·§ã€‚'
        ]
      },
      'ç”Ÿæ´»': {
        name: 'ç”Ÿæ´»',
        tags: ['ç”Ÿæ´»', 'æ—¥å¸¸', 'ç¾é£Ÿ', 'æ—…è¡Œ', 'å®¶å±…', 'ç©¿æ­', 'æŠ¤è‚¤', 'å¥åº·'],
        titles: [
          'ä¸€äººé£Ÿçš„ç²¾è‡´ç”Ÿæ´»ï¼Œç®€å•ä¹Ÿå¾ˆç¾',
          'å‘¨æœ«å®…å®¶æŒ‡å—ï¼Œäº«å—æ…¢æ—¶å…‰',
          'æ—…è¡Œvlogåˆ†äº«ï¼Œä¸–ç•Œé‚£ä¹ˆå¤§è¦å»çœ‹çœ‹',
          'å®¶å±…æ”¹é€ æ—¥è®°ï¼Œæ‰“é€ æ¸©é¦¨å°çª',
          'ä»Šæ—¥ç©¿æ­åˆ†äº«ï¼Œåšè‡ªå·±çš„æ—¶å°šåšä¸»',
          'æŠ¤è‚¤å¿ƒå¾—åˆ†äº«ï¼Œå…»å‡ºå¥½çš®è‚¤çš„ç§˜å¯†',
          'å¥åº·ç”Ÿæ´»å°è´´å£«ï¼Œä»ç»†èŠ‚å¼€å§‹æ”¹å˜',
          'ç¾é£Ÿåˆ¶ä½œæ•™ç¨‹ï¼Œæ²»æ„ˆç³»æ–™ç†æ—¶å…‰',
          'æ–­èˆç¦»å®è·µè®°å½•ï¼Œæç®€ç”Ÿæ´»æ›´è‡ªç”±',
          'æ—©èµ·æŒ‘æˆ˜æ—¥è®°ï¼Œç¾å¥½ä»æ¸…æ™¨å¼€å§‹'
        ],
        contents: [
          'ç”Ÿæ´»ä¸éœ€è¦å¤šä¹ˆè½°è½°çƒˆçƒˆï¼Œå¹³å‡¡çš„æ—¥å¸¸é‡Œä¹Ÿè—ç€å°ç¡®å¹¸ã€‚ä»Šå¤©æƒ³å’Œå¤§å®¶åˆ†äº«æˆ‘çš„æ—¥å¸¸ç”Ÿæ´»ï¼Œå¸Œæœ›èƒ½ç»™å¤§å®¶å¸¦æ¥ä¸€äº›ç”Ÿæ´»çš„çµæ„Ÿå’Œæ¸©æš–ã€‚',
          'æœ€è¿‘çˆ±ä¸Šäº†æ…¢ç”Ÿæ´»çš„èŠ‚å¥ï¼Œä¸å†è¿½æ±‚å¿™ç¢Œï¼Œè€Œæ˜¯å­¦ä¼šäº«å—å½“ä¸‹çš„æ¯ä¸€ä¸ªç¬é—´ã€‚åˆ†äº«ä¸€äº›è®©ç”Ÿæ´»å˜å¾—æ›´ç¾å¥½çš„å°ä¹ æƒ¯å’Œå°æŠ€å·§ã€‚',
          'æ—…è¡Œæ˜¯æˆ‘è®¤è¯†ä¸–ç•Œçš„æ–¹å¼ï¼Œæ¯ä¸€æ¬¡å‡ºè¡Œéƒ½ä¼šæœ‰æ–°çš„å‘ç°å’Œæ„Ÿæ‚Ÿã€‚ä»Šå¤©åˆ†äº«æˆ‘æœ€è¿‘çš„æ—…è¡Œç»å†ï¼Œå¸Œæœ›èƒ½æ¿€å‘å¤§å®¶å¯¹ä¸–ç•Œçš„å¥½å¥‡å¿ƒã€‚',
          'å®¶æ˜¯å¿ƒçµçš„æ¸¯æ¹¾ï¼Œä¸€ä¸ªæ¸©é¦¨èˆ’é€‚çš„å±…ä½ç¯å¢ƒèƒ½å¤Ÿè®©äººæ„Ÿåˆ°æ”¾æ¾å’Œæ„‰æ‚¦ã€‚åˆ†äº«ä¸€äº›å®¶å±…å¸ƒç½®çš„å¿ƒå¾—ï¼Œè®©å®¶å˜å¾—æ›´æœ‰æ¸©åº¦ã€‚'
        ]
      },
      'ç¤¾äº¤': {
        name: 'ç¤¾äº¤',
        tags: ['ç¤¾äº¤', 'æœ‹å‹', 'èšä¼š', 'äº¤æµ', 'åˆ†äº«', 'äººé™…å…³ç³»', 'æ²Ÿé€š'],
        titles: [
          'ç¤¾äº¤æŠ€å·§åˆ†äº«ï¼Œè®©ä½ æˆä¸ºèšä¼šç„¦ç‚¹',
          'æœ‹å‹èšä¼švlogï¼Œå¿«ä¹æ—¶å…‰è¦åˆ†äº«',
          'å¦‚ä½•ç»´æŠ¤é•¿ä¹…çš„å‹è°Šå…³ç³»',
          'å†…å‘è€…çš„ç¤¾äº¤æŒ‡å—ï¼Œæ…¢çƒ­ä¹Ÿå¾ˆæ£’',
          'ç½‘ç»œäº¤å‹å¿ƒå¾—ï¼Œçº¿ä¸Šçº¿ä¸‹éƒ½è¦çœŸè¯š',
          'èšä¼šæ¸¸æˆæ¨èï¼Œæ´»è·ƒæ°”æ°›å¿…å¤‡',
          'äººé™…æ²Ÿé€šçš„è‰ºæœ¯ï¼Œè¯´è¯ä¹Ÿæ˜¯é—¨å­¦é—®',
          'å¼‚åœ°å‹è°Šç»´æŠ¤æŒ‡å—ï¼Œè·ç¦»ä¸æ˜¯é—®é¢˜',
          'èŒåœºç¤¾äº¤ç¤¼ä»ªï¼Œæ–°äººå¿…çœ‹æ”»ç•¥',
          'å¦‚ä½•ç»“äº¤å¿—åŒé“åˆçš„æœ‹å‹'
        ],
        contents: [
          'ç¤¾äº¤æ˜¯äººç”Ÿä¸­é‡è¦çš„ä¸€è¯¾ï¼Œè‰¯å¥½çš„äººé™…å…³ç³»èƒ½å¤Ÿè®©æˆ‘ä»¬çš„ç”Ÿæ´»æ›´åŠ ä¸°å¯Œå¤šå½©ã€‚ä»Šå¤©æƒ³å’Œå¤§å®¶åˆ†äº«ä¸€äº›ç¤¾äº¤æ–¹é¢çš„å¿ƒå¾—å’ŒæŠ€å·§ã€‚',
          'å’Œæœ‹å‹ä»¬èšåœ¨ä¸€èµ·çš„æ—¶å…‰æ€»æ˜¯ç‰¹åˆ«çè´µï¼Œé‚£äº›æ¬¢å£°ç¬‘è¯­å’Œæ¸©æš–çš„é™ªä¼´ï¼Œæ˜¯ç”Ÿæ´»ä¸­æœ€ç¾å¥½çš„å›å¿†ã€‚åˆ†äº«ä¸€äº›å’Œæœ‹å‹ç›¸å¤„çš„å¿«ä¹æ—¶å…‰ã€‚',
          'çœŸæ­£çš„å‹è°Šéœ€è¦ç”¨å¿ƒç»è¥å’Œç»´æŠ¤ï¼Œä¸æ˜¯ç®€å•çš„ç‚¹èµä¹‹äº¤ï¼Œè€Œæ˜¯èƒ½å¤Ÿåœ¨å½¼æ­¤éœ€è¦çš„æ—¶å€™ç»™äºˆæ”¯æŒå’Œé™ªä¼´çš„æ·±åšæƒ…è°Šã€‚',
          'æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„ç¤¾äº¤æ–¹å¼ï¼Œå†…å‘çš„äººä¹Ÿæœ‰è‡ªå·±çš„é­…åŠ›å’Œä¼˜åŠ¿ã€‚é‡è¦çš„æ˜¯è¦æ‰¾åˆ°é€‚åˆè‡ªå·±çš„ç¤¾äº¤èŠ‚å¥ï¼ŒåšçœŸå®çš„è‡ªå·±ã€‚'
        ]
      },
      'æ±‚åŠ©': {
        name: 'æ±‚åŠ©',
        tags: ['å¸®åŠ©', 'æ±‚åŠ©', 'è§£ç­”', 'æ”¯æŒ', 'äº’åŠ©', 'ç»éªŒ', 'å»ºè®®'],
        titles: [
          'æ±‚åŠ©ï¼šå…³äºxxxçš„é—®é¢˜ï¼Œæ±‚å¤§ç¥æŒ‡ç‚¹',
          'ç»éªŒåˆ†äº«ï¼šæˆ‘æ˜¯å¦‚ä½•è§£å†³xxxé—®é¢˜çš„',
          'æ–°æ‰‹æ±‚åŠ©ï¼šç¬¬ä¸€æ¬¡é‡åˆ°è¿™ç§æƒ…å†µ',
          'äº’åŠ©äº¤æµï¼šå¤§å®¶éƒ½æ˜¯æ€ä¹ˆå¤„ç†çš„ï¼Ÿ',
          'é—®é¢˜è§£ç­”ï¼šè¯¦ç»†æ•™ç¨‹æ¥äº†',
          'è¸©å‘ç»éªŒåˆ†äº«ï¼Œé¿å…é‡å¤çŠ¯é”™',
          'èµ„æºåˆ†äº«ï¼šè¿™äº›ç½‘ç«™/å·¥å…·è¶…å¥½ç”¨',
          'ç­”ç–‘è§£æƒ‘ï¼šå¸¸è§é—®é¢˜æ±‡æ€»',
          'ç»éªŒæ€»ç»“ï¼šä»å¤±è´¥ä¸­å­¦åˆ°çš„æ•™è®­',
          'äº’å¸®äº’åŠ©ï¼šä¸€èµ·è§£å†³éš¾é¢˜'
        ],
        contents: [
          'æœ€è¿‘é‡åˆ°äº†ä¸€ä¸ªæ£˜æ‰‹çš„é—®é¢˜ï¼Œè‡ªå·±ç ”ç©¶äº†å¾ˆä¹…è¿˜æ˜¯æ²¡æœ‰æ‰¾åˆ°å¥½çš„è§£å†³æ–¹æ¡ˆã€‚å¸Œæœ›æœ‰ç»éªŒçš„æœ‹å‹èƒ½å¤Ÿç»™ä¸€äº›å»ºè®®å’ŒæŒ‡å¯¼ï¼Œéå¸¸æ„Ÿè°¢ï¼',
          'ä¹‹å‰ä¹Ÿé‡åˆ°è¿‡ç±»ä¼¼çš„é—®é¢˜ï¼Œç»è¿‡ä¸€ç•ªæ‘¸ç´¢ç»ˆäºæ‰¾åˆ°äº†è§£å†³æ–¹æ³•ã€‚ä»Šå¤©åˆ†äº«ç»™å¤§å®¶ï¼Œå¸Œæœ›èƒ½å¸®åŠ©åˆ°æœ‰åŒæ ·å›°æ‰°çš„æœ‹å‹ã€‚',
          'åœ¨è§£å†³é—®é¢˜çš„è¿‡ç¨‹ä¸­è¸©äº†ä¸å°‘å‘ï¼Œä¹Ÿå­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ã€‚æŠŠè¿™äº›ç»éªŒæ€»ç»“å‡ºæ¥åˆ†äº«ç»™å¤§å®¶ï¼Œå¸Œæœ›å¤§å®¶èƒ½å¤Ÿé¿å…é‡å¤çŠ¯é”™ã€‚',
          'äº’å¸®äº’åŠ©æ˜¯ç¤¾åŒºæœ€ç¾å¥½çš„åœ°æ–¹ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„ä¸“é•¿å’Œç»éªŒã€‚ä»Šå¤©æƒ³å’Œå¤§å®¶äº¤æµä¸€ä¸‹å…³äºxxxçš„çœ‹æ³•å’Œç»éªŒã€‚'
        ]
      },
      'è§‚ç‚¹': {
        name: 'è§‚ç‚¹',
        tags: ['è§‚ç‚¹', 'çœ‹æ³•', 'è®¨è®º', 'æ€è€ƒ', 'è§è§£', 'è¯„è®º', 'åˆ†æ'],
        titles: [
          'å…³äºxxxç°è±¡çš„ä¸€äº›æ€è€ƒ',
          'æˆ‘å¯¹xxxé—®é¢˜çš„çœ‹æ³•å’Œå»ºè®®',
          'æ·±åº¦åˆ†æï¼šxxxèƒŒåçš„åŸå› ',
          'è§‚ç‚¹ç¢°æ’ï¼šä¸åŒè§’åº¦çœ‹xxx',
          'ç†æ€§è®¨è®ºï¼šå¦‚ä½•çœ‹å¾…xxx',
          'ä¸ªäººè§è§£ï¼šxxxçš„åˆ©ä¸å¼Š',
          'æ€è¾¨æ—¶åˆ»ï¼šxxxçœŸçš„å¥½å—ï¼Ÿ',
          'å¤šå…ƒè§†è§’ï¼šxxxçš„ä¸åŒè§£è¯»',
          'æ‰¹åˆ¤æ€ç»´ï¼šè´¨ç–‘xxxçš„åˆç†æ€§',
          'è§‚ç‚¹åˆ†äº«ï¼šæˆ‘ä¸ºä»€ä¹ˆæ”¯æŒ/åå¯¹xxx'
        ],
        contents: [
          'æœ€è¿‘å…³äºxxxçš„è®¨è®ºå¾ˆçƒ­çƒˆï¼Œæˆ‘ä¹Ÿæƒ³åˆ†äº«ä¸€ä¸‹è‡ªå·±çš„è§‚ç‚¹å’Œçœ‹æ³•ã€‚æ¯ä¸ªäººçš„ç»å†å’ŒèƒŒæ™¯ä¸åŒï¼Œå¯¹åŒä¸€ä»¶äº‹æƒ…å¯èƒ½ä¼šæœ‰ä¸åŒçš„ç†è§£ã€‚',
          'çœ‹åˆ°å¤§å®¶å¯¹xxxé—®é¢˜çš„è®¨è®ºï¼Œæˆ‘è§‰å¾—è¿™æ˜¯ä¸€ä¸ªå¾ˆå€¼å¾—æ·±å…¥æ€è€ƒçš„è¯é¢˜ã€‚ä»Šå¤©æƒ³ä»å‡ ä¸ªä¸åŒçš„è§’åº¦æ¥åˆ†æè¿™ä¸ªé—®é¢˜ã€‚',
          'ç†æ€§è®¨è®ºæ˜¯ç¤¾ä¼šè¿›æ­¥çš„é‡è¦æ¨åŠ¨åŠ›ï¼Œä¸åŒè§‚ç‚¹çš„ç¢°æ’èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬æ›´å…¨é¢åœ°è®¤è¯†é—®é¢˜ã€‚å¸Œæœ›å¤§å®¶èƒ½å¤Ÿä»¥å¼€æ”¾çš„å¿ƒæ€å‚ä¸è®¨è®ºã€‚',
          'æ¯ä¸ªäººéƒ½æœ‰è¡¨è¾¾è§‚ç‚¹çš„æƒåˆ©ï¼Œä½†åŒæ—¶ä¹Ÿè¦å°Šé‡ä»–äººçš„ä¸åŒçœ‹æ³•ã€‚åœ¨è®¨è®ºä¸­ä¿æŒç†æ€§å’ŒåŒ…å®¹ï¼Œæ‰èƒ½çœŸæ­£ä¿ƒè¿›æ€æƒ³çš„äº¤æµã€‚'
        ]
      },
      'æ¯•ä¸š': {
        name: 'æ¯•ä¸š',
        tags: ['æ¯•ä¸š', 'å‘Šåˆ«', 'å›å¿†', 'æœªæ¥', 'æˆé•¿', 'æ„Ÿæ©', 'é’æ˜¥'],
        titles: [
          'æ¯•ä¸šå€’è®¡æ—¶ï¼Œé’æ˜¥ä¸æ•£åœº',
          'è‡´å³å°†é€å»çš„å¤§å­¦æ—¶å…‰',
          'æ¯•ä¸šæ„Ÿè¨€ï¼šæ„Ÿè°¢é‡è§ï¼Œæ„Ÿè°¢æˆé•¿',
          'å‘Šåˆ«æ¯æ ¡ï¼Œå¸¦ç€æ¢¦æƒ³å‰è¡Œ',
          'æ¯•ä¸šæ—…è¡Œvlogï¼Œæœ€åçš„ç‹‚æ¬¢',
          'å­¦å£«æœå†™çœŸï¼Œå®šæ ¼é’æ˜¥ç¬é—´',
          'æ¯•ä¸šå…¸ç¤¼ç°åœºï¼Œæ³ªæ°´ä¸ç¬‘å®¹å¹¶å­˜',
          'è‡´äº²çˆ±çš„å®¤å‹ä»¬ï¼Œå‹è°Šé•¿å­˜',
          'æ¯•ä¸šè®ºæ–‡ç­”è¾©è®°å½•ï¼Œç»ˆäºç»“æŸäº†',
          'æœªæ¥å¯æœŸï¼Œæ„¿æˆ‘ä»¬éƒ½èƒ½å‘å…‰å‘çƒ­'
        ],
        contents: [
          'æ—¶é—´è¿‡å¾—çœŸå¿«ï¼Œè½¬çœ¼é—´å°±è¦æ¯•ä¸šäº†ã€‚å›æƒ³è¿™å‡ å¹´çš„å¤§å­¦æ—¶å…‰ï¼Œæœ‰å¤ªå¤šç¾å¥½çš„å›å¿†å€¼å¾—çè—ã€‚æ„Ÿè°¢æ‰€æœ‰é™ªä¼´æˆ‘èµ°è¿‡è¿™æ®µè·¯ç¨‹çš„äººã€‚',
          'æ¯•ä¸šä¸æ˜¯ç»“æŸï¼Œè€Œæ˜¯æ–°çš„å¼€å§‹ã€‚è™½ç„¶å³å°†å‘Šåˆ«ç†Ÿæ‚‰çš„æ ¡å›­ï¼Œä½†æˆ‘ä»¬å¸¦èµ°çš„ä¸ä»…æ˜¯çŸ¥è¯†ï¼Œæ›´æ˜¯æˆé•¿çš„ç»å†å’Œçè´µçš„å‹è°Šã€‚',
          'åœ¨è¿™ä¸ªç‰¹æ®Šçš„æ—¶åˆ»ï¼Œæƒ³å¯¹æ‰€æœ‰å¸®åŠ©è¿‡æˆ‘çš„è€å¸ˆã€åŒå­¦å’Œæœ‹å‹ä»¬è¯´å£°è°¢è°¢ã€‚æ˜¯ä½ ä»¬è®©æˆ‘çš„å¤§å­¦ç”Ÿæ´»å¦‚æ­¤ç²¾å½©å’Œå……å®ã€‚',
          'å³å°†è¸å‡ºæ ¡é—¨ï¼Œå¿ƒæƒ…æ—¢å…´å¥‹åˆå¿å¿‘ã€‚æœªæ¥å……æ»¡äº†æœªçŸ¥ï¼Œä½†æˆ‘ç›¸ä¿¡åªè¦ä¿æŒåˆå¿ƒï¼Œå‹‡æ•¢è¿½æ¢¦ï¼Œä¸€åˆ‡éƒ½ä¼šæ˜¯æœ€å¥½çš„å®‰æ’ã€‚'
        ]
      },
      'èŒåœº': {
        name: 'èŒåœº',
        tags: ['èŒåœº', 'å·¥ä½œ', 'æ±‚èŒ', 'é¢è¯•', 'èŒä¸š', 'å®ä¹ ', 'å‡èŒ', 'è·³æ§½'],
        titles: [
          'æ±‚èŒç»éªŒåˆ†äº«ï¼Œä»ç®€å†åˆ°é¢è¯•å…¨æ”»ç•¥',
          'èŒåœºæ–°äººç”Ÿå­˜æŒ‡å—ï¼Œé¿å‘å¿…çœ‹',
          'å®ä¹ æ—¥è®°ï¼šåˆå…¥èŒåœºçš„é…¸ç”œè‹¦è¾£',
          'é¢è¯•æŠ€å·§æ€»ç»“ï¼ŒåŠ©ä½ æˆåŠŸæ‹¿offer',
          'èŒåœºæ²Ÿé€šè‰ºæœ¯ï¼Œå¦‚ä½•ä¸åŒäº‹ç›¸å¤„',
          'å·¥ä½œæ„Ÿæ‚Ÿï¼šåœ¨èŒåœºä¸­æˆé•¿çš„ç‚¹ç‚¹æ»´æ»´',
          'è·³æ§½æ€è€ƒï¼šä»€ä¹ˆæ—¶å€™è¯¥æ¢å·¥ä½œï¼Ÿ',
          'èŒä¸šè§„åˆ’åˆ†äº«ï¼Œå¦‚ä½•æ‰¾åˆ°é€‚åˆçš„æ–¹å‘',
          'åŠ ç­æ–‡åŒ–æ€è€ƒï¼Œå·¥ä½œä¸ç”Ÿæ´»çš„å¹³è¡¡',
          'èŒåœºç©¿æ­æŒ‡å—ï¼Œå½¢è±¡ç®¡ç†å¾ˆé‡è¦'
        ],
        contents: [
          'åˆšåˆšç»“æŸäº†ä¸€è½®æ±‚èŒï¼Œæƒ³å’Œå¤§å®¶åˆ†äº«ä¸€äº›ç»éªŒå’Œå¿ƒå¾—ã€‚æ±‚èŒæ˜¯ä¸€ä¸ªæ¼«é•¿è€Œå……æ»¡æŒ‘æˆ˜çš„è¿‡ç¨‹ï¼Œä½†åªè¦åšå¥½å……åˆ†çš„å‡†å¤‡ï¼Œç›¸ä¿¡å¤§å®¶éƒ½èƒ½æ‰¾åˆ°å¿ƒä»ªçš„å·¥ä½œã€‚',
          'åˆå…¥èŒåœºçš„è¿™æ®µæ—¶é—´ï¼Œå­¦åˆ°äº†å¾ˆå¤šåœ¨å­¦æ ¡é‡Œå­¦ä¸åˆ°çš„ä¸œè¥¿ã€‚èŒåœºç”Ÿæ´»å’Œæ ¡å›­ç”Ÿæ´»æœ‰å¾ˆå¤§çš„ä¸åŒï¼Œéœ€è¦æˆ‘ä»¬ä¸æ–­åœ°é€‚åº”å’Œæˆé•¿ã€‚',
          'å·¥ä½œä¸­é‡åˆ°äº†å¾ˆå¤šæŒ‘æˆ˜ï¼Œä¹Ÿæ”¶è·äº†å¾ˆå¤šæˆé•¿ã€‚æ¯ä¸€æ¬¡çš„å›°éš¾éƒ½æ˜¯å­¦ä¹ çš„æœºä¼šï¼Œæ¯ä¸€æ¬¡çš„æˆåŠŸéƒ½æ˜¯åŠªåŠ›çš„å›æŠ¥ã€‚',
          'èŒåœºæ˜¯ä¸€ä¸ªå¤æ‚çš„ç¯å¢ƒï¼Œéœ€è¦æˆ‘ä»¬å­¦ä¼šå¤„ç†å„ç§äººé™…å…³ç³»å’Œå·¥ä½œé—®é¢˜ã€‚ä¿æŒå­¦ä¹ çš„å¿ƒæ€ï¼Œä¸æ–­æå‡è‡ªå·±çš„èƒ½åŠ›ï¼Œæ˜¯åœ¨èŒåœºä¸­ç«‹è¶³çš„å…³é”®ã€‚'
        ]
      }
    };

    this.usernames = ['äº‘é²¸æ¼«æ¸¸', 'èŠ‹åœ†å°ç”œé¥¼', 'æ™šé£æ‰‘æ»¡æ€€', 'é›¾å²›å¬é£', 'æ˜Ÿå­æ‰“çƒŠäº†', 'æ˜¥æ—¥éƒ¨å¹²äº‹', 'å¥¶æ²¹å°æ–¹', 'å±±æœˆè®°', 'åŠç³–å»å†°', 'æ•æ˜Ÿæ²³å…¥æ¢¦', 'æ ‘å½±æ‘‡çª—', 'æ±½æ°´å†’æ³¡', 'ç¢ç¢ å¿µå°è®°', 'ç›ç³»å°é‡çŒ«', 'è´©å–æ—¥è½', 'è“çƒ¦æ¼', 'ç„¦ç³–ç›å¥‡æœµ', 'é›¨åœäº†å°±èµ°', 'åŒ—å²›è¿·é€”', 'å°æ¡ƒæ±½æ³¡', 'é’æŸ ä¸ƒåˆ†ç”œ', 'é›¾æ•£ è§å±±', 'å¤å¤œæ™šé£', 'ä¸€å£åƒæ‰æœˆäº®', 'æ—é—´å°ç­‘', 'å¿µå®‰', 'å¥¶èŠ™æ³¡èŠ™', 'æ˜Ÿæ²³æ¬²è½¬', 'å—é£çŸ¥æˆ‘æ„', 'å°æ¢¨æ¶¡', 'æ©˜è‰²æ™šéœ', 'è–„è·å¾®å…‰', 'å±±èŒ¶èŠ±è¯»ä¸æ‡‚ç™½ç«ç‘°', 'æœˆè½æ˜Ÿæ²‰', 'å°ç†Šè½¯ç³–', 'å²›ä¸å¹•æ­Œ', 'é£æ‹‚è¿‡è£™æ‘†', 'æ‹¾å…‰è€…', 'èŠ‹æ³¥å•µå•µ', 'é›¾æ¼«å—å±±', 'åŠçª—ç–å½±', 'è½¯é£æ²‰é†‰', 'ç”œåº¦è¶…æ ‡', 'è½æ—¥æ”¶è—å®¶', 'ç¢æ˜Ÿå…¥æ€€', 'æ¸…ç²¥é…å°èœ', 'äº‘æ·±ä¸çŸ¥å¤„', 'æ™šé£å¯„ä¿¡', 'é’è¡«ä»—å‰‘', 'å°æ˜¥æ—¥å’Œ'];
    this.locations = ['åŒ—äº¬', 'ä¸Šæµ·', 'å¹¿å·', 'æ·±åœ³', 'æ­å·', 'æˆéƒ½', 'é‡åº†', 'è¥¿å®‰', 'å—äº¬', 'æ­¦æ±‰', 'å¤©æ´¥', 'è‹å·', 'é•¿æ²™', 'éƒ‘å·', 'é’å²›', 'å¤§è¿', 'å¦é—¨', 'ç¦å·', 'æ˜†æ˜', 'è´µé˜³', 'å—å®', 'æµ·å£', 'ä¸‰äºš', 'æ‹‰è¨', 'ä¹Œé²æœ¨é½', 'é“¶å·', 'è¥¿å®', 'å…°å·', 'å‘¼å’Œæµ©ç‰¹', 'å“ˆå°”æ»¨', 'é•¿æ˜¥', 'æ²ˆé˜³', 'çŸ³å®¶åº„', 'å¤ªåŸ', 'æµå—', 'åˆè‚¥', 'å—æ˜Œ', 'æ¸©å·', 'å®æ³¢', 'æ— é”¡', 'å¸¸å·', 'å¾å·', 'æ‰¬å·', 'é•‡æ±Ÿ', 'æ³°å·', 'ç›åŸ', 'æ·®å®‰', 'è¿äº‘æ¸¯', 'å®¿è¿', 'å˜‰å…´'];
  }

  //ç”Ÿæˆéšæœºå›¾ç‰‡URLï¼ˆç”¨äºç¬”è®°å›¾ç‰‡ï¼‰
  // ä»æ–‡ä»¶åŠ è½½é“¾æ¥
  loadLinksFromFile(filename) {
    try {
      const filePath = path.join(__dirname, filename);
      const content = fs.readFileSync(filePath, 'utf8');
      return content.trim().split('\n').filter(link => link.trim());
    } catch (error) {
      console.error(`è¯»å–æ–‡ä»¶ ${filename} å¤±è´¥:`, error);
      return [];
    }
  }

  generateRandomImageUrl() {
    const randomIndex = Math.floor(Math.random() * this.imageLinks.length);
    return this.imageLinks[randomIndex];
  }

  //ç”Ÿæˆéšæœºå¤´åƒURL
  generateRandomAvatarUrl() {
    const randomIndex = Math.floor(Math.random() * this.avatarLinks.length);
    return this.avatarLinks[randomIndex];
  }

  // å»¶è¿Ÿå‡½æ•°
  delay(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }

  // æ¸…ç©ºæ•°æ®åº“è¡¨æ•°æ®
  async clearTables(connection) {
    console.log(' æ¸…ç©ºç°æœ‰æ•°æ®...');
    await connection.execute('SET FOREIGN_KEY_CHECKS = 0');

    const tables = [
      'user_sessions', 'notifications', 'comments', 'collections',
      'likes', 'post_tags', 'follows', 'post_images', 'posts',
      'tags', 'users', 'admin', 'categories', 'audit', 'post_videos'
    ];

    for (const table of tables) {
      try {
        await connection.execute(`TRUNCATE TABLE ${table}`);
        console.log(`     å·²æ¸…ç©º ${table} è¡¨`);
      } catch (error) {
        if (!error.message.includes("doesn't exist")) {
          console.warn(`   âš ï¸ æ¸…ç©º ${table} è¡¨å¤±è´¥: ${error.message}`);
        }
      }
    }

    await connection.execute('SET FOREIGN_KEY_CHECKS = 1');
    console.log('æ•°æ®æ¸…ç©ºå®Œæˆ');
  }

  //ç”Ÿæˆç®¡ç†å‘˜æ•°æ®
  generateAdmins() {
    return [
      { username: 'admin', password: '123456' },
      { username: 'admin2', password: '123456' },
      { username: 'admin3', password: '123456' }
    ];
  }

  // æ’å…¥ç®¡ç†å‘˜æ•°æ®ï¼ˆå¯†ç ä½¿ç”¨SHA2å“ˆå¸ŒåŠ å¯†ï¼‰
  async insertAdmins(connection, admins) {
    for (const admin of admins) {
      await connection.execute(
        'INSERT INTO admin (username, password) VALUES (?, SHA2(?, 256))',
        [admin.username, admin.password]
      );
    }
    console.log(`     å·²æ’å…¥ ${admins.length} ä¸ªç®¡ç†å‘˜è´¦æˆ·`);
  }

  // æ’å…¥ç”¨æˆ·æ•°æ®ï¼ˆå¯†ç ä½¿ç”¨SHA2å“ˆå¸ŒåŠ å¯†ï¼‰
  async insertUsers(connection, users) {
    for (const user of users) {
      const result = await connection.execute(
        'INSERT INTO users (user_id, password, nickname, avatar, bio, location, follow_count, fans_count, like_count, is_active, last_login_at, email, gender, zodiac_sign, mbti, education, major, interests) VALUES (?, SHA2(?, 256), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)',
        [user.user_id, user.password, user.nickname, user.avatar, user.bio, user.location, 0, 0, 0, user.is_active, user.last_login_at, user.email, user.gender, user.zodiac_sign, user.mbti, user.education, user.major, user.interests]
      );
      // æ›´æ–°ç”¨æˆ·å¯¹è±¡çš„idå­—æ®µä¸ºæ•°æ®åº“è‡ªå¢id
      user.id = result[0].insertId;
      await this.delay(50);
    }
    console.log(`     å·²æ’å…¥ ${users.length} ä¸ªç”¨æˆ·`);
  }

  // æ’å…¥æ ‡ç­¾æ•°æ®
  async insertTags(connection, tags) {
    for (const tag of tags) {
      await connection.execute(
        'INSERT INTO tags (name, use_count) VALUES (?, ?)',
        [tag.name, 0]
      );
    }
    console.log(`     å·²æ’å…¥ ${tags.length} ä¸ªæ ‡ç­¾`);
  }

  // æ’å…¥ç¬”è®°æ•°æ®
  async insertPosts(connection, posts) {
    for (const post of posts) {
      await connection.execute(
        'INSERT INTO posts (user_id, title, content, category_id, type, is_draft, view_count, like_count, collect_count, comment_count) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)',
        [post.user_id, post.title, post.content, post.category_id, 1, post.is_draft, post.view_count, 0, 0, 0]
      );
      await this.delay(50);
    }
    console.log(`     å·²æ’å…¥ ${posts.length} ä¸ªç¬”è®°`);
  }

  // æ’å…¥ç¬”è®°å›¾ç‰‡æ•°æ®
  async insertPostImages(connection, postImages) {
    for (const image of postImages) {
      await connection.execute(
        'INSERT INTO post_images (post_id, image_url) VALUES (?, ?)',
        [image.post_id, image.image_url]
      );
      await this.delay(30);
    }
    console.log(`     å·²æ’å…¥ ${postImages.length} ä¸ªç¬”è®°å›¾ç‰‡`);
  }



  // æ’å…¥å…³æ³¨å…³ç³»æ•°æ®å¹¶æ›´æ–°ç”¨æˆ·ç»Ÿè®¡
  async insertFollowsWithStats(connection, follows, userCount) {
    const userFollowStats = {}; // ç”¨æˆ·å…³æ³¨ç»Ÿè®¡
    const userFansStats = {}; // ç”¨æˆ·ç²‰ä¸ç»Ÿè®¡

    // åˆå§‹åŒ–ç»Ÿè®¡
    for (let i = 1; i <= userCount; i++) {
      userFollowStats[i] = 0;
      userFansStats[i] = 0;
    }

    // æ’å…¥å…³æ³¨å…³ç³»å¹¶ç»Ÿè®¡
    for (const follow of follows) {
      await connection.execute(
        'INSERT INTO follows (follower_id, following_id) VALUES (?, ?)',
        [follow.follower_id, follow.following_id]
      );

      // æ›´æ–°ç»Ÿè®¡
      userFollowStats[follow.follower_id]++;
      userFansStats[follow.following_id]++;
    }

    // æ›´æ–°ç”¨æˆ·å…³æ³¨å’Œç²‰ä¸æ•°
    for (let userId = 1; userId <= userCount; userId++) {
      await connection.execute(
        'UPDATE users SET follow_count = ?, fans_count = ? WHERE id = ?',
        [userFollowStats[userId], userFansStats[userId], userId]
      );
    }

    console.log(`     å·²æ’å…¥ ${follows.length} ä¸ªå…³æ³¨å…³ç³»å¹¶æ›´æ–°ç”¨æˆ·ç»Ÿè®¡`);
  }

  //ç”Ÿæˆéšæœºç”¨æˆ·æ•°æ®
  generateUsers(count = 50) {
    const users = [];
    const bios = [
      'çƒ­çˆ±ç”Ÿæ´»ï¼Œè®°å½•ç¾å¥½ç¬é—´ âœ¨',
      'ä¸€ä¸ªçˆ±ç¬‘çš„å¥³å­©å­ï¼Œåˆ†äº«æ—¥å¸¸å°ç¡®å¹¸ ğŸ˜Š',
      'å­¦ç”Ÿå…š | çˆ±å­¦ä¹ çˆ±ç”Ÿæ´» ğŸ“š',
      'æ‘„å½±çˆ±å¥½è€… | ç”¨é•œå¤´è®°å½•ä¸–ç•Œ ğŸ“·',
      'ç¾é£Ÿæ¢ç´¢è€… | åƒéå¤©ä¸‹ç¾é£Ÿ ğŸœ',
      'æ—…è¡Œè¾¾äºº | ä¸–ç•Œé‚£ä¹ˆå¤§ï¼Œæˆ‘æƒ³å»çœ‹çœ‹ âœˆï¸',
      'æ‰‹å·¥çˆ±å¥½è€… | ç”¨åŒæ‰‹åˆ›é€ ç¾å¥½ ğŸ¨',
      'è¯»ä¹¦äºº | ä¹¦ä¸­è‡ªæœ‰é»„é‡‘å±‹ ğŸ“–',
      'éŸ³ä¹å‘çƒ§å‹ | ç”Ÿæ´»éœ€è¦BGM ğŸµ',
      'å¥èº«å°è¾¾äºº | è‡ªå¾‹ç»™æˆ‘è‡ªç”± ğŸ’ª',
      'å® ç‰©å¥´æ‰ | æˆ‘å®¶ä¸»å­æœ€å¯çˆ± ğŸ±',
      'æ¤ç‰©å¦ˆå¦ˆ | å’Œç»¿æ¤ä¸€èµ·æˆé•¿ ğŸŒ±',
      'å’–å•¡æ§ | æ²¡æœ‰å’–å•¡çš„æ—¥å­ä¸å®Œæ•´ â˜•',
      'ç”µå½±è¿· | å…‰å½±ä¸–ç•Œçš„æ¢ç´¢è€… ğŸ¬',
      'æ¸¸æˆç©å®¶ | è™šæ‹Ÿä¸–ç•Œçš„å†’é™©å®¶ ğŸ®',
      'äºŒæ¬¡å…ƒå°‘å¥³ | æ°¸è¿œ18å² ğŸŒ¸',
      'å¤é£çˆ±å¥½è€… | æ„¿å¾—ä¸€äººå¿ƒï¼Œç™½é¦–ä¸ç›¸ç¦» ğŸ®',
      'ç§‘æŠ€æ§ | è¿½æ±‚æå®¢ç²¾ç¥ ğŸ’»',
      'ç†è´¢å°ç™½ | åŠªåŠ›å®ç°è´¢åŠ¡è‡ªç”± ğŸ’°',
      'åˆ›ä¸šè€… | æ¢¦æƒ³è¿˜æ˜¯è¦æœ‰çš„ ğŸš€',
      'è®¾è®¡å¸ˆ | ç”¨è®¾è®¡æ”¹å˜ä¸–ç•Œ ğŸ¨',
      'ç¨‹åºå‘˜ | ä»£ç æ”¹å˜ä¸–ç•Œ ğŸ‘¨â€ğŸ’»',
      'æ•™å¸ˆ | ä¼ é“æˆä¸šè§£æƒ‘ ğŸ‘©â€ğŸ«',
      'åŒ»å­¦ç”Ÿ | æ•‘æ­»æ‰¶ä¼¤æ˜¯ä½¿å‘½ ğŸ‘©â€âš•ï¸',
      'æ³•å­¦ç”Ÿ | æ­£ä¹‰æ°¸ä¸ç¼ºå¸­ âš–ï¸',
      'å¿ƒç†å­¦çˆ±å¥½è€… | æ¢ç´¢å†…å¿ƒä¸–ç•Œ ğŸ§ ',
      'ç¯ä¿ä¸»ä¹‰è€… | ä¿æŠ¤åœ°çƒä»æˆ‘åšèµ· ğŸŒ',
      'æç®€ä¸»ä¹‰è€… | å°‘å³æ˜¯å¤š âœ¨',
      'æ”¶çº³è¾¾äºº | æ•´ç†æ”¹å˜ç”Ÿæ´» ğŸ“¦',
      'çƒ˜ç„™çˆ±å¥½è€… | ç”œèœœç”Ÿæ´»çš„åˆ›é€ è€… ğŸ§',
      'ç‘œä¼½ç»ƒä¹ è€… | èº«å¿ƒåˆä¸€çš„ä¿®è¡Œ ğŸ§˜â€',
      'è·‘æ­¥çˆ±å¥½è€… | å¥”è·‘æ˜¯æœ€å¥½çš„ä¿®è¡Œ ğŸƒâ€â™€ï¸',
      'ä¹¦æ³•çˆ±å¥½è€… | ä¸€ç¬”ä¸€åˆ’çš†ä¿®è¡Œ âœï¸',
      'èŒ¶è‰ºçˆ±å¥½è€… | å“èŒ¶å“äººç”Ÿ ğŸµ',
      'èŠ±è‰ºå¸ˆ | ç”¨èŠ±æœµè£…ç‚¹ç”Ÿæ´» ğŸ’',
      'æ’ç”»å¸ˆ | ç”¨ç”»ç¬”è¯‰è¯´æ•…äº‹ ğŸ–Œï¸',
      'è‡ªç”±æ’°ç¨¿äºº | æ–‡å­—æ˜¯æˆ‘çš„æ­¦å™¨ âœ’ï¸',
      'ç¿»è¯‘å·¥ä½œè€… | è¯­è¨€çš„æ¡¥æ¢ ğŸŒ',
      'å¿—æ„¿è€… | ç”¨çˆ±å¿ƒæ¸©æš–ä¸–ç•Œ â¤ï¸',
      'ç‹¬ç«‹æ€è€ƒè€… | ä¿æŒç†æ€§ä¸æ‰¹åˆ¤ ğŸ¤”',
      'ç»ˆèº«å­¦ä¹ è€… | æ´»åˆ°è€å­¦åˆ°è€ ğŸ“š',
      'æ—¶é—´ç®¡ç†è¾¾äºº | æ•ˆç‡å°±æ˜¯ç”Ÿå‘½ â°',
      'æ–­èˆç¦»è·µè¡Œè€… | ç®€å•ç”Ÿæ´»æ›´è‡ªç”± ğŸ•Šï¸',
      'æ­£èƒ½é‡ä¼ æ’­è€… | åšè‡ªå·±çš„å¤ªé˜³ â˜€ï¸',
      'æ¢¦æƒ³è¿½é€è€… | æ°¸è¿œå¹´è½»ï¼Œæ°¸è¿œçƒ­æ³ªç›ˆçœ¶ ğŸŒŸ',
      'ç”Ÿæ´»ç¾å­¦å®¶ | æŠŠæ—¥å­è¿‡æˆè¯— ğŸŒº',
      'æƒ…æ„Ÿåšä¸» | ç”¨æ–‡å­—æ²»æ„ˆå¿ƒçµ ğŸ’',
      'çŸ¥è¯†åˆ†äº«è€… | åˆ†äº«è®©çŸ¥è¯†æ›´æœ‰ä»·å€¼ ğŸ“',
      'æ¸©æŸ”çš„äºº | æ„¿ä¸–ç•Œæ¸©æŸ”ä»¥å¾… ğŸ¤—',
      'åŠªåŠ›ç”Ÿæ´»çš„æ™®é€šäºº | å¹³å‡¡è€Œä¸å¹³åº¸ ğŸŒˆ'
    ];

    // 6å¤§ä¿¡æ¯çš„é€‰é¡¹æ± 
    const genders = ['male', 'female'];
    const zodiacSigns = ['ç™½ç¾Šåº§', 'é‡‘ç‰›åº§', 'åŒå­åº§', 'å·¨èŸ¹åº§', 'ç‹®å­åº§', 'å¤„å¥³åº§', 'å¤©ç§¤åº§', 'å¤©èåº§', 'å°„æ‰‹åº§', 'æ‘©ç¾¯åº§', 'æ°´ç“¶åº§', 'åŒé±¼åº§'];
    const mbtiTypes = ['INTJ', 'INTP', 'ENTJ', 'ENTP', 'INFJ', 'INFP', 'ENFJ', 'ENFP', 'ISTJ', 'ISFJ', 'ESTJ', 'ESFJ', 'ISTP', 'ISFP', 'ESTP', 'ESFP'];
    const educations = ['é«˜ä¸­', 'å¤§ä¸“', 'æœ¬ç§‘', 'ç¡•å£«', 'åšå£«'];
    const majors = ['è®¡ç®—æœºç§‘å­¦', 'è½¯ä»¶å·¥ç¨‹', 'ç”µå­ä¿¡æ¯', 'æœºæ¢°å·¥ç¨‹', 'åœŸæœ¨å·¥ç¨‹', 'å»ºç­‘å­¦', 'ç»æµå­¦', 'é‡‘èå­¦', 'ä¼šè®¡å­¦', 'å¸‚åœºè¥é”€', 'å·¥å•†ç®¡ç†', 'äººåŠ›èµ„æº', 'æ³•å­¦', 'æ–°é—»ä¼ æ’­', 'æ±‰è¯­è¨€æ–‡å­¦', 'è‹±è¯­', 'å¿ƒç†å­¦', 'æ•™è‚²å­¦', 'åŒ»å­¦', 'æŠ¤ç†å­¦', 'è¯å­¦', 'ç”Ÿç‰©å­¦', 'åŒ–å­¦', 'ç‰©ç†å­¦', 'æ•°å­¦', 'è‰ºæœ¯è®¾è®¡', 'éŸ³ä¹', 'ç¾æœ¯', 'ä½“è‚²'];
    const interestOptions = ['é˜…è¯»', 'ç”µå½±', 'éŸ³ä¹', 'æ—…è¡Œ', 'æ‘„å½±', 'ç¾é£Ÿ', 'å¥èº«', 'æ¸¸æˆ', 'ç»˜ç”»', 'ä¹¦æ³•', 'èˆè¹ˆ', 'å”±æ­Œ', 'ä¹å™¨', 'ç¼–ç¨‹', 'è®¾è®¡', 'å†™ä½œ', 'æ‰‹å·¥', 'å›­è‰º', 'å® ç‰©', 'æ”¶è—', 'è¿åŠ¨', 'ç‘œä¼½', 'å†¥æƒ³', 'çƒ¹é¥ª', 'çƒ˜ç„™', 'èŒ¶è‰º', 'å’–å•¡', 'çº¢é…’', 'æ—¶å°š', 'åŒ–å¦†', 'æŠ¤è‚¤', 'è´­ç‰©', 'æŠ•èµ„', 'åˆ›ä¸š', 'å¿—æ„¿æœåŠ¡', 'ç¯ä¿', 'å…¬ç›Š'];

    for (let i = 0; i < count; i++) {
      // éšæœºç”Ÿæˆå…´è¶£ï¼ˆ2-5ä¸ªï¼‰
      const userInterests = [];
      const interestCount = Math.floor(Math.random() * 4) + 2; // 2-5ä¸ªå…´è¶£
      const shuffledInterests = [...interestOptions].sort(() => 0.5 - Math.random());
      for (let j = 0; j < interestCount; j++) {
        userInterests.push(shuffledInterests[j]);
      }

      const user = {
        user_id: `user${String(i + 1).padStart(3, '0')}`, // å°çŸ³æ¦´å·ï¼Œå­—ç¬¦ä¸²æ ¼å¼
        password: '123456', // ä½¿ç”¨æ˜æ–‡å¯†ç 
        nickname: this.usernames[i], // æŒ‰é¡ºåºä½¿ç”¨usernamesæ•°ç»„ï¼Œä¸é‡å¤
        avatar: this.generateRandomAvatarUrl(),
        bio: bios[Math.floor(Math.random() * bios.length)],
        location: this.locations[i], // æŒ‰é¡ºåºä½¿ç”¨locationsæ•°ç»„ï¼Œä¸é‡å¤
        follow_count: Math.floor(Math.random() * 500),
        fans_count: Math.floor(Math.random() * 1000),
        like_count: Math.floor(Math.random() * 5000),
        is_active: 1, // æ·»åŠ is_activeå­—æ®µ
        last_login_at: new Date(Date.now() - Math.floor(Math.random() * 30 * 24 * 60 * 60 * 1000)), // æ·»åŠ last_login_atå­—æ®µï¼ˆéšæœº30å¤©å†…ï¼‰
        // æ·»åŠ emailå­—æ®µï¼Œä½¿ç”¨user_idå’ŒéšæœºåŸŸåç»„åˆ
        email: `user${String(i + 1).padStart(3, '0')}@example.com`,
        // 6å¤§ä¿¡æ¯å­—æ®µï¼ˆ70%æ¦‚ç‡å¡«å†™ï¼Œ30%æ¦‚ç‡ä¸ºç©ºï¼‰
        gender: Math.random() > 0.3 ? genders[Math.floor(Math.random() * genders.length)] : null,
        zodiac_sign: Math.random() > 0.3 ? zodiacSigns[Math.floor(Math.random() * zodiacSigns.length)] : null,
        mbti: Math.random() > 0.3 ? mbtiTypes[Math.floor(Math.random() * mbtiTypes.length)] : null,
        education: Math.random() > 0.3 ? educations[Math.floor(Math.random() * educations.length)] : null,
        major: Math.random() > 0.3 ? majors[Math.floor(Math.random() * majors.length)] : null,
        interests: Math.random() > 0.3 ? JSON.stringify(userInterests) : null,
        verified: 0
      };
      users.push(user);
    }
    return users;
  }

  //ç”Ÿæˆéšæœºæ ‡ç­¾æ•°æ®
  generateTags() {
    const allTags = [];
    Object.values(this.categoryData).forEach(category => {
      allTags.push(...category.tags);
    });

    // å»é‡å¹¶ç”Ÿæˆæ ‡ç­¾æ•°æ®
    const uniqueTags = [...new Set(allTags)];
    return uniqueTags.map(tag => ({
      name: tag,
      use_count: Math.floor(Math.random() * 200) + 10
    }));
  }

  //ç”Ÿæˆéšæœºç¬”è®°æ•°æ®
  generatePosts(userCount, count = 200) {
    const posts = [];
    for (let i = 0; i < count; i++) {
      const categoryIndex = Math.floor(Math.random() * this.categories.length);
      const category = this.categories[categoryIndex];
      const categoryInfo = this.categoryData[category];

      const post = {
        user_id: Math.floor(Math.random() * userCount) + 1,
        title: categoryInfo.titles[Math.floor(Math.random() * categoryInfo.titles.length)],
        content: categoryInfo.contents[Math.floor(Math.random() * categoryInfo.contents.length)],
        category_id: categoryIndex + 1, // ä½¿ç”¨åˆ†ç±»IDï¼ˆä»1å¼€å§‹ï¼‰
        is_draft: 0, // çŒè£…æ•°æ®å…¨éƒ¨ä¸ºå·²å‘å¸ƒçŠ¶æ€ï¼ˆ0è¡¨ç¤ºéè‰ç¨¿ï¼‰
        view_count: Math.floor(Math.random() * 10000),
        like_count: Math.floor(Math.random() * 500),
        collect_count: Math.floor(Math.random() * 100),
        comment_count: Math.floor(Math.random() * 50)
      };
      posts.push(post);
    }
    return posts;
  }

  //ç”Ÿæˆç¬”è®°å›¾ç‰‡æ•°æ®
  generatePostImages(postCount, maxImagesPerPost = 5) {
    const images = [];
    for (let postId = 1; postId <= postCount; postId++) {
      const imageCount = Math.floor(Math.random() * maxImagesPerPost) + 1;
      for (let i = 0; i < imageCount; i++) {
        images.push({
          post_id: postId,
          image_url: this.generateRandomImageUrl()
        });
      }
    }
    return images;
  }

  //ç”Ÿæˆå…³æ³¨å…³ç³»æ•°æ®
  generateFollows(userCount, count = 300) {
    const follows = [];
    const used = new Set();

    for (let i = 0; i < count; i++) {
      let follower_id, following_id;
      do {
        follower_id = Math.floor(Math.random() * userCount) + 1;
        following_id = Math.floor(Math.random() * userCount) + 1;
      } while (follower_id === following_id || used.has(`${follower_id}-${following_id}`));

      used.add(`${follower_id}-${following_id}`);
      follows.push({ follower_id, following_id });
    }
    return follows;
  }

  //ç”Ÿæˆç‚¹èµæ•°æ®
  generateLikes(userCount, postCount, commentCount, count = 1000) {
    const likes = [];
    const used = new Set();

    for (let i = 0; i < count; i++) {
      let user_id, target_id;
      const target_type = Math.random() > 0.8 ? 2 : 1; // 80%ç‚¹èµç¬”è®°ï¼Œ20%ç‚¹èµè¯„è®º

      do {
        user_id = Math.floor(Math.random() * userCount) + 1;
        if (target_type === 1) {
          // ç‚¹èµç¬”è®°
          target_id = Math.floor(Math.random() * postCount) + 1;
        } else {
          // ç‚¹èµè¯„è®º
          target_id = Math.floor(Math.random() * commentCount) + 1;
        }
      } while (used.has(`${user_id}-${target_type}-${target_id}`));

      used.add(`${user_id}-${target_type}-${target_id}`);
      likes.push({ user_id, target_type, target_id });
    }
    return likes;
  }

  //ç”Ÿæˆæ”¶è—æ•°æ®
  generateCollections(userCount, postCount, count = 400) {
    const collections = [];
    const used = new Set();

    for (let i = 0; i < count; i++) {
      let user_id, post_id;
      do {
        user_id = Math.floor(Math.random() * userCount) + 1;
        post_id = Math.floor(Math.random() * postCount) + 1;
      } while (used.has(`${user_id}-${post_id}`));

      used.add(`${user_id}-${post_id}`);
      collections.push({ user_id, post_id });
    }
    return collections;
  }

  //ç”Ÿæˆè¯„è®ºæ•°æ®
  generateComments(users, postCount, count = 800) {
    const userCount = users.length;
    const comments = [];
    const commentTexts = [
      // è¡¨è¾¾èµåŒå’Œæ”¯æŒ
      'å¾ˆæ£’çš„åˆ†äº«ï¼', 'å­¦åˆ°äº†å¾ˆå¤š', 'æ„Ÿè°¢åˆ†äº«', 'å¾ˆæœ‰ç”¨çš„å†…å®¹', 'æ”¯æŒæ¥¼ä¸»', 'å†™å¾—å¾ˆå¥½', 'å¾ˆæœ‰å¯å‘', 'æ”¶è—äº†',
      'åŒæ„Ÿ', 'å¾ˆå®ç”¨', 'è°¢è°¢åˆ†äº«', 'å¾ˆæœ‰æ„æ€', 'èµåŒä½ çš„è§‚ç‚¹', 'å¾ˆæœ‰é“ç†', 'å­¦ä¹ äº†', 'å¾ˆæ£’çš„ç»éªŒ',
      'è¯´å¾—å¤ªå¯¹äº†ï¼', 'æ·±æœ‰åŒæ„Ÿ', 'å—ç›ŠåŒªæµ…', 'å¤ªæœ‰ç”¨äº†', 'å¿…é¡»ç‚¹èµ', 'è¯´åˆ°å¿ƒåé‡Œäº†', 'å®Œå…¨åŒæ„',

      // è¡¨è¾¾ç–‘é—®å’Œè®¨è®º
      'æœ‰ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸€ä¸‹', 'è¿™ä¸ªæ–¹æ³•çœŸçš„æœ‰æ•ˆå—ï¼Ÿ', 'èƒ½è¯¦ç»†è¯´è¯´å—ï¼Ÿ', 'æœ‰æ²¡æœ‰æ›´å¥½çš„å»ºè®®ï¼Ÿ',
      'æˆ‘è§‰å¾—è¿˜å¯ä»¥è¿™æ ·...', 'è¡¥å……ä¸€ç‚¹', 'æˆ‘çš„ç»éªŒæ˜¯...', 'ä¸è¿‡æˆ‘è§‰å¾—...', 'å¦å¤–ä¸€ä¸ªè§’åº¦æ¥çœ‹',
      'æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼Ÿ', 'æ±‚æ›´å¤šç»†èŠ‚', 'èƒ½åˆ†äº«ä¸‹å…·ä½“æ“ä½œå—ï¼Ÿ', 'æœ‰ç±»ä¼¼ç»å†',

      // è¡¨è¾¾æ„Ÿè°¢å’Œé¼“åŠ±
      'è°¢è°¢æ¥¼ä¸»çš„åˆ†äº«', 'çœŸçš„å¸®åˆ°æˆ‘äº†', 'æ­£å¥½éœ€è¦è¿™ä¸ª', 'è§£å†³äº†æˆ‘çš„å›°æƒ‘', 'åŠæ—¶é›¨å•Š',
      'æ¥¼ä¸»å¤ªå‰å®³äº†', 'ç»§ç»­åŠ æ²¹', 'æœŸå¾…æ›´å¤šåˆ†äº«', 'å…³æ³¨äº†', 'é©¬å…‹ä¸€ä¸‹',

      // è¡¨è¾¾æƒ…æ„Ÿå…±é¸£
      'å¤ªçœŸå®äº†', 'è¯´å‡ºäº†æˆ‘çš„å¿ƒå£°', 'æ„ŸåŒèº«å—', 'æˆ‘ä¹Ÿæ˜¯è¿™æ ·æƒ³çš„', 'å¼•èµ·å…±é¸£äº†',
      'çœ‹å“­äº†', 'å¤ªæ„ŸåŠ¨äº†', 'å¾ˆæ¸©æš–', 'æ­£èƒ½é‡æ»¡æ»¡', 'å¾ˆæ²»æ„ˆ',

      // æ—¥å¸¸äº’åŠ¨
      'æ²™å‘ï¼', 'å‰æ’æ”¯æŒ', 'æ¥æ™šäº†', 'å›´è§‚å­¦ä¹ ', 'é»˜é»˜ç‚¹èµ', 'è·¯è¿‡ç•™å',
      'é¡¶ä¸€ä¸ª', 'å¥½æ–‡ç« ', 'å€¼å¾—æ”¶è—', 'è½¬å‘äº†', 'åˆ†äº«ç»™æœ‹å‹',

      // å…·ä½“å»ºè®®å’Œè¡¥å……
      'å»ºè®®å¯ä»¥è¯•è¯•...', 'æˆ‘ä¸€èˆ¬ä¼šè¿™æ ·åš', 'è¿˜æœ‰ä¸€ä¸ªå°æŠ€å·§', 'æ³¨æ„è¿™ä¸ªç»†èŠ‚',
      'æˆ‘çš„åšæ³•æ˜¯...', 'æ¨èä¸€ä¸ªå·¥å…·', 'å¯ä»¥å‚è€ƒè¿™ä¸ª', 'ç±»ä¼¼çš„è¿˜æœ‰...',

      // è¡¨è¾¾ä¸åŒè§‚ç‚¹ï¼ˆç¤¼è²Œï¼‰
      'æˆ‘æœ‰ä¸åŒçœ‹æ³•', 'å¯èƒ½å› äººè€Œå¼‚å§', 'æˆ‘çš„æƒ…å†µæœ‰ç‚¹ä¸åŒ', 'ä¹Ÿè®¸è¿˜æœ‰å…¶ä»–æ–¹å¼',
      'ä¸ªäººè§‰å¾—...', 'ä»æˆ‘çš„è§’åº¦æ¥çœ‹', 'å¯èƒ½éœ€è¦å…·ä½“åˆ†æ', 'æƒ…å†µæ¯”è¾ƒå¤æ‚',

      // æ ¡å›­ç›¸å…³
      'å­¦é•¿å­¦å§å¤ªå‰å®³äº†', 'ä½œä¸ºå­¦å¼Ÿå­¦å¦¹è¡¨ç¤ºè†œæ‹œ', 'è¿™å°±æ˜¯å¤§å­¦ç”Ÿæ´»å•Š', 'é’æ˜¥å›å¿†æ€',
      'æƒ³å¿µæ ¡å›­æ—¶å…‰', 'ç°åœ¨çš„å­¦ç”ŸçœŸå¹¸ç¦', 'å½“å¹´æˆ‘ä»¬ä¹Ÿæ˜¯è¿™æ ·', 'æ—¶ä»£ä¸åŒäº†',

      // ç”Ÿæ´»æ„Ÿæ‚Ÿ
      'ç”Ÿæ´»ä¸æ˜“', 'ä¸”è¡Œä¸”çæƒœ', 'æ¯å¤©éƒ½åœ¨æˆé•¿', 'æ„Ÿè°¢ç”Ÿæ´»çš„ç¾å¥½',
      'å¹³å‡¡ä¸­çš„å°ç¡®å¹¸', 'ç®€å•å°±æ˜¯å¹¸ç¦', 'çŸ¥è¶³å¸¸ä¹', 'çæƒœå½“ä¸‹',

      // ç½‘ç»œç”¨è¯­
      '666', 'ç‰›å•Š', 'yyds', 'ç»äº†', 'å¤ªå¼ºäº†', 'æœæ°”', 'å‰å®³å‰å®³',
      'å­¦åºŸäº†', 'æˆ‘é…¸äº†', 'æŸ æª¬ç²¾ä¸Šçº¿', 'è¿™å°±æ˜¯å·®è·', 'äººæ¯”äººæ°”æ­»äºº'
    ];

    // å¸¦ @ç”¨æˆ·çš„è¯„è®ºæ¨¡æ¿
    const mentionCommentTemplates = [
      ' è¿™ä¸ªå†…å®¹ä¸é”™ï¼Œä½ å¯ä»¥çœ‹çœ‹ ',
      ' è¿™ä¸ªæŒºæœ‰æ„æ€çš„ï¼Œåˆ†äº«ç»™ä½  ',
      ' è¿™ä¸ªå€¼å¾—ä¸€çœ‹ï¼Œä½ è‚¯å®šä¼šæ„Ÿå…´è¶£ ',
      ' è§‰å¾—è¿™ä¸ªå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿‡æ¥çœ‹çœ‹ ',
      ' è¿™ä¸ªæŒºå¥½çš„ï¼Œæ¨èç»™ä½  ',
      ' çœ‹åˆ°è¿™ä¸ªå°±æƒ³åˆ°ä½ äº†ï¼Œæ¥çœ‹çœ‹å§ ',
      ' è¿™ä¸ªå†…å®¹ä¸é”™ï¼Œä½ å¯èƒ½ä¼šå–œæ¬¢ ',
      ' è¿™ä¸ªæŒºæœ‰ä»·å€¼çš„ï¼Œåˆ†äº«ç»™ä½  ',
      ' è¿™ä¸ªå€¼å¾—å…³æ³¨ï¼Œä½ å¯ä»¥äº†è§£ä¸‹ ',
      ' è§‰å¾—è¿™ä¸ªä¸é”™ï¼Œä½ ä¹Ÿçœ‹çœ‹å§ ',
      ' è¿™ä¸ªå†…å®¹æŒºå¥½ï¼Œæ¨èä½ çœ‹ä¸€ä¸‹ ',
      ' è¿™ä¸ªæŒºå®ç”¨çš„ï¼Œä½ å¯ä»¥å‚è€ƒä¸‹ ',
      ' çœ‹åˆ°è¿™ä¸ªå°±æƒ³è®©ä½ ä¹Ÿçœ‹çœ‹ ',
      ' è¿™ä¸ªå†…å®¹ä¸é”™ï¼Œåˆ†äº«ç»™ä½ å‚è€ƒ ',
      ' è¿™ä¸ªæŒºæœ‰æ„æ€ï¼Œä½ è¿‡æ¥çœ‹çœ‹ '
    ];


    // æŒ‰ç¬”è®°åˆ†ç»„ç”Ÿæˆè¯„è®ºï¼Œç¡®ä¿å›å¤è¯„è®ºçš„parent_idæŒ‡å‘åŒä¸€ç¬”è®°ä¸‹çš„è¯„è®º
    const commentsByPost = {};

    for (let i = 0; i < count; i++) {
      const postId = Math.floor(Math.random() * postCount) + 1;

      // åˆå§‹åŒ–è¯¥ç¬”è®°çš„è¯„è®ºæ•°ç»„
      if (!commentsByPost[postId]) {
        commentsByPost[postId] = [];
      }

      const existingCommentsForPost = commentsByPost[postId];
      let parentId = null;

      // 30%çš„æ¦‚ç‡ç”Ÿæˆå›å¤è¯„è®ºï¼Œä¸”è¯¥ç¬”è®°ä¸‹å¿…é¡»å·²æœ‰è¯„è®º
      if (existingCommentsForPost.length > 0 && Math.random() > 0.7) {
        // éšæœºé€‰æ‹©è¯¥ç¬”è®°ä¸‹çš„ä¸€ä¸ªå·²å­˜åœ¨è¯„è®ºä½œä¸ºçˆ¶è¯„è®º
        const randomIndex = Math.floor(Math.random() * existingCommentsForPost.length);
        parentId = existingCommentsForPost[randomIndex].id;
      }

      let content;

      // 15%çš„æ¦‚ç‡ç”Ÿæˆå¸¦@ç”¨æˆ·çš„è¯„è®º
      if (Math.random() < 0.15) {
        // éšæœºé€‰æ‹©ä¸€ä¸ªç”¨æˆ·è¿›è¡Œ@
        const mentionedUserIndex = Math.floor(Math.random() * userCount);
        const mentionedUser = users[mentionedUserIndex];
        const mentionedUserDisplayId = mentionedUser.user_id;
        const mentionedNickname = mentionedUser.nickname;
        const mentionText = mentionCommentTemplates[Math.floor(Math.random() * mentionCommentTemplates.length)];

        //ç”ŸæˆHTMLæ ¼å¼çš„@ç”¨æˆ·è¯„è®º
        content = `<p><a href="/user/${mentionedUserDisplayId}" data-user-id="${mentionedUserDisplayId}" class="mention-link" contenteditable="false">@${mentionedNickname}</a>&nbsp;${mentionText}</p>`;
      } else {
        //ç”Ÿæˆæ™®é€šè¯„è®º
        content = commentTexts[Math.floor(Math.random() * commentTexts.length)];
      }

      const comment = {
        id: i + 1, // ä¸´æ—¶IDï¼Œç”¨äºç”Ÿæˆè¿‡ç¨‹ä¸­çš„å¼•ç”¨
        post_id: postId,
        user_id: Math.floor(Math.random() * userCount) + 1,
        parent_id: parentId,
        content: content,
        like_count: Math.floor(Math.random() * 20)
      };

      // æ·»åŠ åˆ°å¯¹åº”ç¬”è®°çš„è¯„è®ºåˆ—è¡¨ä¸­
      commentsByPost[postId].push(comment);
      comments.push(comment);
    }

    // ç§»é™¤ä¸´æ—¶IDå­—æ®µ
    return comments.map(comment => {
      const { id, ...commentWithoutId } = comment;
      return commentWithoutId;
    });
  }


  //ç”Ÿæˆç”¨æˆ·ä¼šè¯æ•°æ® - æ¯ä¸ªç”¨æˆ·ä¸€æ¡sessionè®°å½•
  generateUserSessions(userCount) {
    const sessions = [];
    const userAgents = [
      // Windows Chrome
      'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',
      'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36',
      'Mozilla/5.0 (Windows NT 11.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',

      // Windows Edge
      'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36 Edg/120.0.0.0',
      'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36 Edg/119.0.0.0',

      // Windows Firefox
      'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:120.0) Gecko/20100101 Firefox/120.0',
      'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:119.0) Gecko/20100101 Firefox/119.0',

      // macOS Chrome
      'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',
      'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36',

      // macOS Safari
      'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.1 Safari/605.1.15',
      'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Safari/605.1.15',

      // iPhone Safari
      'Mozilla/5.0 (iPhone; CPU iPhone OS 17_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.1 Mobile/15E148 Safari/604.1',
      'Mozilla/5.0 (iPhone; CPU iPhone OS 16_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1',
      'Mozilla/5.0 (iPhone; CPU iPhone OS 17_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.0 Mobile/15E148 Safari/604.1',

      // Android Chrome
      'Mozilla/5.0 (Linux; Android 14; SM-G998B) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Mobile Safari/537.36',
      'Mozilla/5.0 (Linux; Android 13; Pixel 7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Mobile Safari/537.36',
      'Mozilla/5.0 (Linux; Android 14; Pixel 8 Pro) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Mobile Safari/537.36',

      // Android Firefox
      'Mozilla/5.0 (Mobile; rv:120.0) Gecko/120.0 Firefox/120.0',
      'Mozilla/5.0 (Android 14; Mobile; rv:120.0) Gecko/120.0 Firefox/120.0',

      // iPad Safari
      'Mozilla/5.0 (iPad; CPU OS 17_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.1 Mobile/15E148 Safari/604.1',
      'Mozilla/5.0 (iPad; CPU OS 16_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1'
    ];

    // çœŸå®çš„ä¸­å›½å…¬ç½‘IPåœ°å€æ®µ
    const ipRanges = [
      // ä¸­å›½ç”µä¿¡
      () => `59.${Math.floor(Math.random() * 64) + 32}.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}`, // 59.32.0.0/11
      () => `61.${Math.floor(Math.random() * 64) + 128}.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}`, // 61.128.0.0/10
      () => `114.${Math.floor(Math.random() * 64) + 80}.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}`, // 114.80.0.0/12
      () => `183.${Math.floor(Math.random() * 64) + 192}.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}`, // 183.192.0.0/10

      // ä¸­å›½è”é€š
      () => `123.${Math.floor(Math.random() * 128) + 112}.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}`, // 123.112.0.0/12
      () => `125.${Math.floor(Math.random() * 64) + 64}.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}`, // 125.64.0.0/11
      () => `221.${Math.floor(Math.random() * 32) + 192}.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}`, // 221.192.0.0/11

      // ä¸­å›½ç§»åŠ¨
      () => `117.${Math.floor(Math.random() * 64) + 128}.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}`, // 117.128.0.0/10
      () => `223.${Math.floor(Math.random() * 64) + 64}.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}`, // 223.64.0.0/10

      // å…¶ä»–ä¸­å›½ISP
      () => `101.${Math.floor(Math.random() * 64) + 64}.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}`, // 101.64.0.0/11
      () => `106.${Math.floor(Math.random() * 64) + 80}.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}`, // 106.80.0.0/12
      () => `112.${Math.floor(Math.random() * 64) + 64}.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}`, // 112.64.0.0/11
      () => `119.${Math.floor(Math.random() * 64) + 128}.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}` // 119.128.0.0/11
    ];

    // ä¸ºæ¯ä¸ªç”¨æˆ·ç”Ÿæˆä¸€æ¡sessionè®°å½•
    for (let userId = 1; userId <= userCount; userId++) {
      const session = {
        user_id: userId,
        token: `token_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
        refresh_token: `refresh_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
        expires_at: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000), // 7å¤©åè¿‡æœŸ
        user_agent: userAgents[Math.floor(Math.random() * userAgents.length)],
        is_active: Math.random() > 0.2 ? 1 : 0 // 80%æ´»è·ƒ
      };
      sessions.push(session);
    }
    return sessions;
  }

  //ç”Ÿæˆç”¨æˆ·æ ‡ç­¾æ•°æ®


  // æ’å…¥æ•°æ®åˆ°æ•°æ®åº“
  async insertData() {
    let connection;
    try {
      console.log('å¼€å§‹ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®...');

      // ä»è¿æ¥æ± è·å–è¿æ¥
      connection = await pool.getConnection();
      console.log('æ•°æ®åº“è¿æ¥æˆåŠŸ');

      // æ¸…ç©ºç°æœ‰æ•°æ®
      await this.clearTables(connection);

      // ç¬¬é›¶æ­¥ï¼šç”Ÿæˆå¹¶æ’å…¥ç®¡ç†å‘˜æ•°æ®
      console.log('ç”Ÿæˆç®¡ç†å‘˜æ•°æ®...');
      const admins = this.generateAdmins();
      await this.insertAdmins(connection, admins);

      // ç¬¬ä¸€æ­¥ï¼šç”Ÿæˆå¹¶æ’å…¥ç”¨æˆ·æ•°æ®ï¼ˆåˆå§‹ç»Ÿè®¡ä¸º0ï¼‰
      console.log('ç”Ÿæˆç”¨æˆ·æ•°æ®...');
      const users = this.generateUsers(50);
      await this.insertUsers(connection, users);

      // ç¬¬äºŒæ­¥ï¼šç”Ÿæˆå¹¶æ’å…¥æ ‡ç­¾æ•°æ®ï¼ˆåˆå§‹ä½¿ç”¨æ¬¡æ•°ä¸º0ï¼‰
      console.log('ç”Ÿæˆæ ‡ç­¾æ•°æ®...');
      const tags = this.generateTags();
      await this.insertTags(connection, tags);

      // ç¬¬äºŒæ­¥.ä¸€ï¼šç”Ÿæˆå¹¶æ’å…¥åˆ†ç±»æ•°æ®
      console.log('ç”Ÿæˆåˆ†ç±»æ•°æ®...');
      const categories = this.generateCategories();
      await this.insertCategories(connection, categories);

      // ç¬¬ä¸‰æ­¥ï¼šç”Ÿæˆå¹¶æ’å…¥ç¬”è®°æ•°æ®ï¼ˆåˆå§‹ç»Ÿè®¡ä¸º0ï¼‰
      console.log('ç”Ÿæˆç¬”è®°æ•°æ®...');
      const posts = this.generatePosts(users.length, 200);
      await this.insertPosts(connection, posts);

      // ç¬¬å››æ­¥ï¼šç”Ÿæˆå¹¶æ’å…¥ç¬”è®°å›¾ç‰‡æ•°æ®
      console.log('ç”Ÿæˆç¬”è®°å›¾ç‰‡æ•°æ®...');
      const postImages = this.generatePostImages(posts.length);
      await this.insertPostImages(connection, postImages);

      // ç¬¬äº”æ­¥ï¼šç”Ÿæˆå¹¶æ’å…¥å…³æ³¨å…³ç³»æ•°æ®ï¼ŒåŒæ—¶æ›´æ–°ç”¨æˆ·ç»Ÿè®¡
      console.log('ç”Ÿæˆå…³æ³¨å…³ç³»æ•°æ®...');
      const follows = this.generateFollows(users.length, 300);
      await this.insertFollowsWithStats(connection, follows, users.length);

      // ç¬¬å…­æ­¥ï¼šç”Ÿæˆå¹¶æ’å…¥è¯„è®ºæ•°æ®ï¼ŒåŒæ—¶æ›´æ–°ç¬”è®°ç»Ÿè®¡
      console.log('ç”Ÿæˆè¯„è®ºæ•°æ®...');
      const comments = this.generateComments(users, posts.length, 800);
      const postCommentStats = {}; // ç¬”è®°è¯„è®ºç»Ÿè®¡
      const insertedCommentIds = []; // å­˜å‚¨å·²æ’å…¥çš„è¯„è®ºID

      // åˆå§‹åŒ–ç»Ÿè®¡
      for (let i = 1; i <= posts.length; i++) {
        postCommentStats[i] = 0;
      }

      for (let i = 0; i < comments.length; i++) {
        const comment = comments[i];
        const result = await connection.execute(
          'INSERT INTO comments (post_id, user_id, parent_id, content, like_count) VALUES (?, ?, ?, ?, ?)',
          [comment.post_id, comment.user_id, comment.parent_id, comment.content, comment.like_count]
        );

        // å­˜å‚¨æ’å…¥åçš„è¯„è®ºID
        const insertedId = result[0].insertId;
        insertedCommentIds.push(insertedId);
        comments[i].id = insertedId; // æ›´æ–°è¯„è®ºå¯¹è±¡çš„ID

        postCommentStats[comment.post_id]++;
      }

      // æ›´æ–°ç¬”è®°è¯„è®ºæ•°
      for (let postId = 1; postId <= posts.length; postId++) {
        await connection.execute(
          'UPDATE posts SET comment_count = ? WHERE id = ?',
          [postCommentStats[postId], postId]
        );
      }

      console.log(`     å·²æ’å…¥ ${comments.length} ä¸ªè¯„è®ºå¹¶æ›´æ–°ç¬”è®°ç»Ÿè®¡`);

      // ç¬¬ä¸ƒæ­¥ï¼šç”Ÿæˆå¹¶æ’å…¥ç‚¹èµæ•°æ®ï¼ŒåŒæ—¶æ›´æ–°ç¬”è®°å’Œç”¨æˆ·ç»Ÿè®¡
      console.log('ç”Ÿæˆç‚¹èµæ•°æ®...');
      const likes = this.generateLikes(users.length, posts.length, comments.length, 1000);
      const postLikeStats = {}; // ç¬”è®°ç‚¹èµç»Ÿè®¡
      const userLikeStats = {}; // ç”¨æˆ·è·å¾—ç‚¹èµç»Ÿè®¡

      // åˆå§‹åŒ–ç»Ÿè®¡
      for (let i = 1; i <= posts.length; i++) {
        postLikeStats[i] = 0;
      }
      for (let i = 1; i <= users.length; i++) {
        userLikeStats[i] = 0;
      }

      for (const like of likes) {
        await connection.execute(
          'INSERT INTO likes (user_id, target_type, target_id) VALUES (?, ?, ?)',
          [like.user_id, like.target_type, like.target_id]
        );

        // å¦‚æœæ˜¯ç‚¹èµç¬”è®°
        if (like.target_type === 1) {
          postLikeStats[like.target_id]++;

          // è·å–ç¬”è®°ä½œè€…ï¼Œå¢åŠ å…¶è·å¾—ç‚¹èµæ•°
          const postAuthor = posts[like.target_id - 1].user_id;
          userLikeStats[postAuthor]++;
        }
      }

      // æ›´æ–°ç¬”è®°ç‚¹èµæ•°
      for (let postId = 1; postId <= posts.length; postId++) {
        await connection.execute(
          'UPDATE posts SET like_count = ? WHERE id = ?',
          [postLikeStats[postId], postId]
        );
      }

      // æ›´æ–°ç”¨æˆ·è·å¾—ç‚¹èµæ•°
      for (let userId = 1; userId <= users.length; userId++) {
        await connection.execute(
          'UPDATE users SET like_count = ? WHERE id = ?',
          [userLikeStats[userId], userId]
        );
      }

      // ç¬¬å…«æ­¥ï¼šç”Ÿæˆå¹¶æ’å…¥æ”¶è—æ•°æ®ï¼ŒåŒæ—¶æ›´æ–°ç¬”è®°ç»Ÿè®¡
      console.log('ç”Ÿæˆæ”¶è—æ•°æ®...');
      const collections = this.generateCollections(users.length, posts.length, 400);
      const postCollectStats = {}; // ç¬”è®°æ”¶è—ç»Ÿè®¡

      // åˆå§‹åŒ–ç»Ÿè®¡
      for (let i = 1; i <= posts.length; i++) {
        postCollectStats[i] = 0;
      }

      for (const collection of collections) {
        await connection.execute(
          'INSERT INTO collections (user_id, post_id) VALUES (?, ?)',
          [collection.user_id, collection.post_id]
        );

        postCollectStats[collection.post_id]++;
      }

      // æ›´æ–°ç¬”è®°æ”¶è—æ•°
      for (let postId = 1; postId <= posts.length; postId++) {
        await connection.execute(
          'UPDATE posts SET collect_count = ? WHERE id = ?',
          [postCollectStats[postId], postId]
        );
      }

      // ç¬¬ä¹æ­¥ï¼šç”Ÿæˆç¬”è®°æ ‡ç­¾å…³è”æ•°æ®ï¼ŒåŒæ—¶æ›´æ–°æ ‡ç­¾ä½¿ç”¨æ¬¡æ•°
      console.log('ç”Ÿæˆç¬”è®°æ ‡ç­¾å…³è”æ•°æ®...');
      const tagUseStats = {}; // æ ‡ç­¾ä½¿ç”¨ç»Ÿè®¡

      // åˆå§‹åŒ–ç»Ÿè®¡
      for (let i = 1; i <= tags.length; i++) {
        tagUseStats[i] = 0;
      }

      for (let postId = 1; postId <= posts.length; postId++) {
        const tagCount = Math.floor(Math.random() * 3) + 1;
        const usedTags = new Set();
        for (let i = 0; i < tagCount; i++) {
          let tagId;
          do {
            tagId = Math.floor(Math.random() * tags.length) + 1;
          } while (usedTags.has(tagId));
          usedTags.add(tagId);

          await connection.execute(
            'INSERT INTO post_tags (post_id, tag_id) VALUES (?, ?)',
            [postId, tagId]
          );

          tagUseStats[tagId]++;
        }
      }

      // æ›´æ–°æ ‡ç­¾ä½¿ç”¨æ¬¡æ•°
      for (let tagId = 1; tagId <= tags.length; tagId++) {
        await connection.execute(
          'UPDATE tags SET use_count = ? WHERE id = ?',
          [tagUseStats[tagId], tagId]
        );
      }

      // ç¬¬åæ­¥ï¼šåŸºäºå®é™…æ•°æ®ç”Ÿæˆé€šçŸ¥
      console.log('ç”Ÿæˆé€šçŸ¥æ•°æ®...');
      const notifications = [];

      /*
       * é€šçŸ¥ç±»å‹å®šä¹‰ï¼š
       * 1 - ç‚¹èµç¬”è®°ï¼šèµäº†ä½ çš„ç¬”è®°
       * 2 - ç‚¹èµè¯„è®ºï¼šèµäº†ä½ çš„è¯„è®º
       * 3 - æ”¶è—ç¬”è®°ï¼šæ”¶è—äº†ä½ çš„ç¬”è®°
       * 4 - è¯„è®ºç¬”è®°ï¼šè¯„è®ºäº†ä½ çš„ç¬”è®°
       * 5 - å›å¤è¯„è®ºï¼šå›å¤äº†ä½ çš„è¯„è®º
       * 6 - å…³æ³¨ï¼šå…³æ³¨äº†ä½ ï¼ˆå‰ç«¯æ ¹æ®äº’å…³çŠ¶æ€æ¸²æŸ“ä¸º"å…³æ³¨äº†ä½ "æˆ–"å›å…³äº†ä½ "ï¼‰
       * 7 - @æåŠï¼šåœ¨è¯„è®ºä¸­@äº†ä½ 
       */

      // åŸºäºç‚¹èµç”Ÿæˆé€šçŸ¥
      for (const like of likes) {
        if (like.target_type === 1) { // ç‚¹èµç¬”è®°
          const postAuthor = posts[like.target_id - 1].user_id;
          if (like.user_id !== postAuthor) { // ä¸ç»™è‡ªå·±å‘é€šçŸ¥
            const notificationData = NotificationHelper.createLikePostNotification(
              postAuthor,
              like.user_id,
              like.target_id
            );
            notificationData.is_read = Math.random() > 0.4 ? 1 : 0;
            notifications.push(notificationData);
          }
        } else if (like.target_type === 2) { // ç‚¹èµè¯„è®º
          // éœ€è¦æ‰¾åˆ°è¯„è®ºçš„ä½œè€…
          const comment = comments.find(c => c.id === like.target_id);
          if (comment && like.user_id !== comment.user_id) { // ä¸ç»™è‡ªå·±å‘é€šçŸ¥
            const notificationData = NotificationHelper.createLikeCommentNotification(
              comment.user_id,
              like.user_id,
              comment.post_id, // ä½¿ç”¨ç¬”è®°IDä¾¿äºè·³è½¬
              comment.id // å…³è”å…·ä½“è¯„è®º
            );
            notificationData.is_read = Math.random() > 0.4 ? 1 : 0;
            notifications.push(notificationData);
          }
        }
      }

      // åŸºäºè¯„è®ºç”Ÿæˆé€šçŸ¥
      for (let i = 0; i < comments.length; i++) {
        const comment = comments[i];

        // æ£€æŸ¥è¯„è®ºæ˜¯å¦åŒ…å«@ç”¨æˆ·ï¼Œç”Ÿæˆ@æåŠé€šçŸ¥
        if (comment.content && comment.content.includes('mention-link')) {
          // æå–@ç”¨æˆ·ä¿¡æ¯ï¼ˆç®€åŒ–å¤„ç†ï¼Œä»HTMLä¸­æå–data-user-idï¼‰
          const mentionMatches = comment.content.match(/data-user-id="([^"]+)"/g);
          if (mentionMatches) {
            for (const match of mentionMatches) {
              const userIdMatch = match.match(/data-user-id="([^"]+)"/);
              if (userIdMatch) {
                const mentionedUserDisplayId = userIdMatch[1];
                // æ ¹æ®display_idæ‰¾åˆ°å¯¹åº”çš„è‡ªå¢ID
                const mentionedUser = users.find(u => u.user_id === mentionedUserDisplayId);
                if (mentionedUser && mentionedUser.id !== comment.user_id) { // ä¸ç»™è‡ªå·±å‘é€šçŸ¥
                  const notificationData = NotificationHelper.createMentionNotification(
                    mentionedUser.id,
                    comment.user_id,
                    comment.post_id,
                    comment.id
                  );
                  notificationData.is_read = Math.random() > 0.4 ? 1 : 0;
                  notifications.push(notificationData);
                }
              }
            }
          }
        }

        if (comment.parent_id) {
          // å›å¤è¯„è®ºçš„é€šçŸ¥
          const parentComment = comments.find(c => c.id === comment.parent_id);
          if (parentComment && comment.user_id !== parentComment.user_id) { // ä¸ç»™è‡ªå·±å‘é€šçŸ¥
            const notificationData = NotificationHelper.createReplyCommentNotification(
              parentComment.user_id,
              comment.user_id,
              comment.post_id,
              comment.id // å…³è”å…·ä½“å›å¤è¯„è®º
            );
            notificationData.is_read = Math.random() > 0.4 ? 1 : 0;
            notifications.push(notificationData);
          }
        } else {
          // è¯„è®ºç¬”è®°çš„é€šçŸ¥
          const postAuthor = posts[comment.post_id - 1].user_id;
          if (comment.user_id !== postAuthor) { // ä¸ç»™è‡ªå·±å‘é€šçŸ¥
            const notificationData = NotificationHelper.createCommentPostNotification(
              postAuthor,
              comment.user_id,
              comment.post_id,
              comment.id // å…³è”å…·ä½“è¯„è®º
            );
            notificationData.is_read = Math.random() > 0.4 ? 1 : 0;
            notifications.push(notificationData);
          }
        }
      }

      // åŸºäºå…³æ³¨ç”Ÿæˆé€šçŸ¥
      for (const follow of follows) {
        const notificationData = NotificationHelper.createFollowNotification(
          follow.following_id,
          follow.follower_id
        );
        notificationData.is_read = Math.random() > 0.4 ? 1 : 0;
        notifications.push(notificationData);
      }

      // åŸºäºæ”¶è—ç”Ÿæˆé€šçŸ¥
      for (const collection of collections) {
        const postAuthor = posts[collection.post_id - 1].user_id;
        if (collection.user_id !== postAuthor) { // ä¸ç»™è‡ªå·±å‘é€šçŸ¥
          const notificationData = NotificationHelper.createCollectPostNotification(
            postAuthor,
            collection.user_id,
            collection.post_id
          );
          notificationData.is_read = Math.random() > 0.4 ? 1 : 0;
          notifications.push(notificationData);
        }
      }

      // æ’å…¥é€šçŸ¥æ•°æ®
      for (let i = 0; i < notifications.length; i++) {
        const notification = notifications[i];

        // æ£€æŸ¥æ˜¯å¦æœ‰undefinedå­—æ®µ
        const params = [notification.user_id, notification.sender_id, notification.type, notification.title, notification.target_id, notification.comment_id || null, notification.is_read];
        const hasUndefined = params.some(param => param === undefined);

        if (hasUndefined) {
          console.error(`Notification ${i} has undefined parameters:`, {
            user_id: notification.user_id,
            sender_id: notification.sender_id,
            type: notification.type,
            title: notification.title,
            target_id: notification.target_id,
            comment_id: notification.comment_id,
            is_read: notification.is_read
          });
          continue; // è·³è¿‡è¿™ä¸ªæœ‰é—®é¢˜çš„é€šçŸ¥
        }

        await connection.execute(
          'INSERT INTO notifications (user_id, sender_id, type, title, target_id, comment_id, is_read) VALUES (?, ?, ?, ?, ?, ?, ?)',
          params
        );
      }

      // ç¬¬åä¸€æ­¥ï¼šç”Ÿæˆå¹¶æ’å…¥ç”¨æˆ·ä¼šè¯æ•°æ® - æ¯ä¸ªç”¨æˆ·ä¸€æ¡session
      console.log('ç”Ÿæˆç”¨æˆ·ä¼šè¯æ•°æ®...');
      const userSessions = this.generateUserSessions(users.length);
      for (const session of userSessions) {
        await connection.execute(
          'INSERT INTO user_sessions (user_id, token, refresh_token, expires_at, user_agent, is_active) VALUES (?, ?, ?, ?, ?, ?)',
          [session.user_id, session.token, session.refresh_token, session.expires_at, session.user_agent, session.is_active]
        );
      }

      console.log('æ¨¡æ‹Ÿæ•°æ®ç”Ÿæˆå®Œæˆï¼');
      console.log(`  æ•°æ®ç»Ÿè®¡:`);
      console.log(`   ç®¡ç†å‘˜: ${admins.length} ä¸ª`);
      console.log(`   ç”¨æˆ·: ${users.length} ä¸ª`);
      console.log(`   æ ‡ç­¾: ${tags.length} ä¸ª`);
      console.log(`   ç¬”è®°: ${posts.length} ä¸ª`);
      console.log(`   å›¾ç‰‡: ${postImages.length} å¼ `);
      console.log(`   å…³æ³¨å…³ç³»: ${follows.length} ä¸ª`);
      console.log(`   ç‚¹èµ: ${likes.length} ä¸ª`);
      console.log(`   æ”¶è—: ${collections.length} ä¸ª`);
      console.log(`   è¯„è®º: ${comments.length} ä¸ª`);
      console.log(`   é€šçŸ¥: ${notifications.length} ä¸ª`);
      console.log(`   ä¼šè¯: ${userSessions.length} ä¸ª`);
      console.log(`   åˆ†ç±»åˆ—è¡¨: ${this.categories.join(', ')}`);

    } catch (error) {
      console.error('ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®å¤±è´¥:', error);
    } finally {
      if (connection) {
        connection.release();
        console.log('æ•°æ®åº“è¿æ¥å·²é‡Šæ”¾å›è¿æ¥æ± ');
      }
    }
  }

  // ç”Ÿæˆåˆ†ç±»æ•°æ®
  generateCategories() {
    // åˆ†ç±»ä¸­è‹±æ–‡å¯¹ç…§
    const categoryMapping = {
      'å­¦ä¹ ': 'study',
      'æ ¡å›­': 'campus',
      'æƒ…æ„Ÿ': 'emotion',
      'å…´è¶£': 'interest',
      'ç”Ÿæ´»': 'life',
      'ç¤¾äº¤': 'social',
      'æ±‚åŠ©': 'help',
      'è§‚ç‚¹': 'opinion',
      'æ¯•ä¸š': 'graduation',
      'èŒåœº': 'career'
    };

    return this.categories.map(name => ({
      name: name,
      category_title: categoryMapping[name]
    }));
  }

  // æ’å…¥åˆ†ç±»æ•°æ®
  async insertCategories(connection, categories) {
    for (const category of categories) {
      await connection.execute(
        'INSERT IGNORE INTO categories (name, category_title) VALUES (?, ?)',
        [category.name, category.category_title]
      );
    }
    console.log(`     å·²æ’å…¥ ${categories.length} ä¸ªåˆ†ç±»`);
  }
}

// ç­‰å¾…ç”¨æˆ·æŒ‰å›è½¦é€€å‡º
async function waitForExit() {
  console.log('\næŒ‰å›è½¦é”®é€€å‡º...');
  return new Promise((resolve) => {
    process.stdin.setRawMode(true);
    process.stdin.resume();
    process.stdin.once('data', () => {
      process.stdin.setRawMode(false);
      resolve();
    });
  });
}

// è¿è¡Œæ•°æ®ç”Ÿæˆå™¨
if (require.main === module) {
  const generator = new DataGenerator();
  generator.insertData().then(async () => {
    await waitForExit();
    process.exit(0);
  }).catch(async () => {
    await waitForExit();
    process.exit(1);
  });
}

module.exports = DataGenerator;